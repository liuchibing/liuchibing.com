function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as Ne,r as N,u as ct,Y as _e,E as ft,h as _t,w as mt,a as R,m as H,b as Y,c as Q,e as i,o as g,f as E,g as S,i as t,j as a,k as m,p as pt,l as me,F as U,n as B,q as y,s as h,t as T,v as G,x as je,y as L,z as Le,A as gt,B as pe,C as bt,D as ge,G as be,H as vt,I as yt,J as ht,K as wt,L as Be,M as Vt,N as kt,O as Et,P as St,Q as Ct,R as xt,S as Ut,__tla as At}from"./vendor-BFDwry3W.js";Promise.all([(()=>{try{return At}catch{}})()]).then(async()=>{(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(u){if(u.ep)return;u.ep=!0;const o=e(u);fetch(u.href,o)}})();function ve(l,e){const n=new File([l],e),u=URL.createObjectURL(n),o=document.createElement("a");o.href=u,o.download=e,o.click(),setTimeout(()=>{URL.revokeObjectURL(u),o.remove()},100)}const q=Ne("config",()=>{const l=N({patterns:{},categories:{},ruleSets:{}}),{open:e,reset:n,onChange:u}=ct({accept:".yaml,.yml,text/vnd.yaml"});u(d=>{var p;d&&((p=d.item(0))==null||p.text().then(s=>{l.value=_e.parse(s)}).catch(s=>{ft.alert(_t("pre",{class:"err-msg-box",style:{whiteSpace:"pre-wrap"}},`\u6253\u5F00\u6587\u4EF6\u65F6\u9047\u5230\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u662F\u5426\u6B63\u786E\u3002
\u9519\u8BEF\u4FE1\u606F\uFF1A
${s}`),"\u9519\u8BEF",{type:"error"})}).finally(()=>n()))});function o(){e()}function r(){const d=_e.stringify(l.value);ve(d,"config.yaml")}return{config:l,load:o,save:r}});function ye(l,e,n=!1){return l.map((u,o)=>{const r=e.ruleSets[u.ruleSetName];return`
X: ${o}
V: T1 name=${o+1} stem=up
K: none ${n?"":"perc stafflines=1 middle=A"}
L: 1/16
${Te(u,e,r)} |]
`}).join("")}function Te(l,e,n){let u=0,o=null;return l.beats.map((r,d)=>{const p=e.patterns[r.patternName];let s="";if(d in n.scoreInsertions){const c=n.scoreInsertions[d],f=c.match(/\[M: ?(\d+?)\/(\d+?)]/);f!==null?(o={upper:Number.parseInt(f[1]),lower:Number.parseInt(f[2])},u!==0&&!c.includes("|")&&(s+="| "),u=0):c.includes("|")&&(u=0),s+=c}return o&&u%o.upper===0&&u>0&&!s.includes("|")&&(s="| "+s),u++,`${s} `+(r.offset===0?p.displayAbc:"")}).join(" ")}const Oe=""+new URL("rhythmologist_core_bg-C4iOWep5.wasm",import.meta.url).href,Fe=async(l={},e)=>{let n;if(e.startsWith("data:")){const u=e.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(u,"base64");else if(typeof atob=="function"){const r=atob(u);o=new Uint8Array(r.length);for(let d=0;d<r.length;d++)o[d]=r.charCodeAt(d)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(o,l)}else{const u=await fetch(e),o=u.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(u,l);else{const r=await u.arrayBuffer();n=await WebAssembly.instantiate(r,l)}}return n.instance.exports};let P;function qe(l){P=l}const Me=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let he=new Me("utf-8",{ignoreBOM:!0,fatal:!0});he.decode();let le=null;function te(){return(le===null||le.byteLength===0)&&(le=new Uint8Array(P.memory.buffer)),le}function ae(l,e){return l=l>>>0,he.decode(te().subarray(l,l+e))}const D=new Array(128).fill(void 0);D.push(void 0,null,!0,!1);let ee=D.length;function C(l){ee===D.length&&D.push(D.length+1);const e=ee;return ee=D[e],D[e]=l,e}function V(l){return D[l]}function $e(l){l<132||(D[l]=ee,ee=l)}function ne(l){const e=V(l);return $e(l),e}let oe=0;const We=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let ue=new We("utf-8");const De=typeof ue.encodeInto=="function"?function(l,e){return ue.encodeInto(l,e)}:function(l,e){const n=ue.encode(l);return e.set(n),{read:l.length,written:n.length}};function we(l,e,n){if(n===void 0){const p=ue.encode(l),s=e(p.length,1)>>>0;return te().subarray(s,s+p.length).set(p),oe=p.length,s}let u=l.length,o=e(u,1)>>>0;const r=te();let d=0;for(;d<u;d++){const p=l.charCodeAt(d);if(p>127)break;r[o+d]=p}if(d!==u){d!==0&&(l=l.slice(d)),o=n(o,u,u=d+l.length*3,1)>>>0;const p=te().subarray(o+d,o+u),s=De(l,p);d+=s.written,o=n(o,u,d,1)>>>0}return oe=d,o}let re=null;function X(){return(re===null||re.byteLength===0)&&(re=new Int32Array(P.memory.buffer)),re}function ze(l){try{const o=P.__wbindgen_add_to_stack_pointer(-16),r=we(l,P.__wbindgen_malloc,P.__wbindgen_realloc),d=oe;P.parse_config_json(o,r,d);var e=X()[o/4+0],n=X()[o/4+1],u=X()[o/4+2];if(u)throw ne(n);return ie.__wrap(e)}finally{P.__wbindgen_add_to_stack_pointer(16)}}function Ke(l,e){if(!(l instanceof e))throw new Error(`expected instance of ${e.name}`);return l.ptr}function Qe(l,e){let n,u;try{const f=P.__wbindgen_add_to_stack_pointer(-16);Ke(l,ie);const k=we(e,P.__wbindgen_malloc,P.__wbindgen_realloc),b=oe;P.generate_batch_json(f,l.__wbg_ptr,k,b);var o=X()[f/4+0],r=X()[f/4+1],d=X()[f/4+2],p=X()[f/4+3],s=o,c=r;if(p)throw s=0,c=0,ne(d);return n=s,u=c,ae(s,c)}finally{P.__wbindgen_add_to_stack_pointer(16),P.__wbindgen_free(n,u,1)}}function z(l,e){try{return l.apply(this,e)}catch(n){P.__wbindgen_exn_store(C(n))}}const Ve=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(l=>P.__wbg_config_free(l>>>0));class ie{static __wrap(e){e=e>>>0;const n=Object.create(ie.prototype);return n.__wbg_ptr=e,Ve.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ve.unregister(this),e}free(){const e=this.__destroy_into_raw();P.__wbg_config_free(e)}}function Ge(l,e){const n=ae(l,e);return C(n)}function Xe(l){ne(l)}function Je(l){const e=V(l).crypto;return C(e)}function He(l){const e=V(l);return typeof e=="object"&&e!==null}function Ye(l){const e=V(l).process;return C(e)}function Ze(l){const e=V(l).versions;return C(e)}function el(l){const e=V(l).node;return C(e)}function ll(l){return typeof V(l)=="string"}function tl(l){const e=V(l).msCrypto;return C(e)}function al(){return z(function(){const l=module.require;return C(l)},arguments)}function nl(l){return typeof V(l)=="function"}function ol(){return z(function(l,e){V(l).randomFillSync(ne(e))},arguments)}function ul(){return z(function(l,e){V(l).getRandomValues(V(e))},arguments)}function rl(l,e){const n=new Function(ae(l,e));return C(n)}function il(){return z(function(l,e){const n=V(l).call(V(e));return C(n)},arguments)}function sl(l){const e=V(l);return C(e)}function dl(){return z(function(){const l=self.self;return C(l)},arguments)}function cl(){return z(function(){const l=window.window;return C(l)},arguments)}function fl(){return z(function(){const l=globalThis.globalThis;return C(l)},arguments)}function _l(){return z(function(){const l=global.global;return C(l)},arguments)}function ml(l){return V(l)===void 0}function pl(){return z(function(l,e,n){const u=V(l).call(V(e),V(n));return C(u)},arguments)}function gl(l){const e=V(l).buffer;return C(e)}function bl(l,e,n){const u=new Uint8Array(V(l),e>>>0,n>>>0);return C(u)}function vl(l){const e=new Uint8Array(V(l));return C(e)}function yl(l,e,n){V(l).set(V(e),n>>>0)}function hl(l){const e=new Uint8Array(l>>>0);return C(e)}function wl(l,e,n){const u=V(l).subarray(e>>>0,n>>>0);return C(u)}function Vl(l,e){throw new Error(ae(l,e))}function kl(){const l=P.memory;return C(l)}URL=globalThis.URL;const M=await Fe({"./rhythmologist_core_bg.js":{__wbindgen_string_new:Ge,__wbindgen_object_drop_ref:Xe,__wbg_crypto_d05b68a3572bb8ca:Je,__wbindgen_is_object:He,__wbg_process_b02b3570280d0366:Ye,__wbg_versions_c1cb42213cedf0f5:Ze,__wbg_node_43b1089f407e4ec2:el,__wbindgen_is_string:ll,__wbg_msCrypto_10fc94afee92bd76:tl,__wbg_require_9a7e0f667ead4995:al,__wbindgen_is_function:nl,__wbg_randomFillSync_b70ccbdf4926a99d:ol,__wbg_getRandomValues_7e42b4fb8779dc6d:ul,__wbg_newnoargs_cfecb3965268594c:rl,__wbg_call_3f093dd26d5569f8:il,__wbindgen_object_clone_ref:sl,__wbg_self_05040bd9523805b9:dl,__wbg_window_adc720039f2cb14f:cl,__wbg_globalThis_622105db80c1457d:fl,__wbg_global_f56b013ed9bcf359:_l,__wbindgen_is_undefined:ml,__wbg_call_67f2111acd2dfdb6:pl,__wbg_buffer_b914fb8b50ebbc3e:gl,__wbg_newwithbyteoffsetandlength_0de9ee56e9f6ee6e:bl,__wbg_new_b1f2d6842d615181:vl,__wbg_set_7d988c98e6ced92d:yl,__wbg_newwithlength_0d03cef43b68a530:hl,__wbg_subarray_adc418253d76e2f1:wl,__wbindgen_throw:Vl,__wbindgen_memory:kl}},Oe),El=M.memory,Sl=M.parse_config_json,Cl=M.generate_batch_yaml,xl=M.generate_batch_json,Ul=M.__wbg_config_free,Al=M.__wbindgen_add_to_stack_pointer,Pl=M.__wbindgen_malloc,Il=M.__wbindgen_realloc,Rl=M.__wbindgen_free,Nl=M.__wbindgen_exn_store,jl=Object.freeze(Object.defineProperty({__proto__:null,__wbg_config_free:Ul,__wbindgen_add_to_stack_pointer:Al,__wbindgen_exn_store:Nl,__wbindgen_free:Rl,__wbindgen_malloc:Pl,__wbindgen_realloc:Il,generate_batch_json:xl,generate_batch_yaml:Cl,memory:El,parse_config_json:Sl},Symbol.toStringTag,{value:"Module"}));qe(jl);const de=Ne("appStatus",()=>{const l=q(),e=N("editing"),n=N(""),u=N([]),o=N(""),r=N(null);mt(()=>{try{r.value=ze(JSON.stringify(l.config)),e.value="editing"}catch(c){r.value=null,o.value=c.toString(),e.value="edit-err"}});function d(){e.value="editing"}function p(){if(r.value!==null){u.value=[],e.value="running";try{const c=Qe(r.value,n.value);u.value=JSON.parse(c),e.value="result"}catch(c){o.value=c.toString(),e.value="exec-err"}}}function s(c=!1){const f=ye(u.value,l.config,c);ve(f,"generation.abc")}return{currentStep:e,selectedPresetName:n,generationResult:u,errorMsg:o,configParsed:r,edit:d,run:p,exportAbc:s}}),K=Symbol("keyForXObjArray");function ke(l){return l[K]||(l[K]=Symbol()),l[K]}const Ll={style:{"margin-bottom":"8px"}},Bl={style:{"margin-bottom":"8px"}},Tl=R({__name:"ConfigChildItemList",props:H({defaultNewItemValue:{},dialogTitle:{default:""},dialogPrompt:{default:""},dialogErrorText:{default:""},disableScroll:{type:Boolean,default:!0},retrieveKey:{type:Function,default:(l,e)=>e}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=l,u=N(!1),o=N(""),r=Q(()=>!(o.value in e.value)&&o.value.length>0);function d(){Array.isArray(e.value)?e.value.push(n.defaultNewItemValue()):(e.value[o.value]=n.defaultNewItemValue(),o.value="",u.value=!1)}function p(){Array.isArray(e.value)?d():u.value=!0}function s(b){Array.isArray(e.value)?e.value.splice(b,1):delete e.value[b]}function c(b){if(Array.isArray(e.value)){const _=n.defaultNewItemValue();typeof e.value[b][K]<"u"&&(_[K]=e.value[b][K]),e.value[b]=_}else e.value[b]=n.defaultNewItemValue()}function f(b){if(Array.isArray(e.value)){let _=e.value.splice(b,1);e.value.splice(b-1,0,..._)}}function k(b){if(Array.isArray(e.value)){let _=e.value.splice(b,1);e.value.splice(b+1,0,..._)}}return(b,_)=>{const A=i("ElIcon"),O=i("ElButton"),F=i("ElForm"),I=i("ElCollapseItem"),j=i("ElCollapse"),v=i("ElScrollbar"),w=i("ElInput"),x=i("ElText"),Re=i("el-button"),dt=i("ElDialog");return g(),E(U,null,[S("div",{class:bt({"disable-scroll":n.disableScroll}),style:{display:"flex","flex-direction":"column"}},[S("div",Ll,[t(O,{onClick:_[0]||(_[0]=$=>p())},{default:a(()=>[t(A,null,{default:a(()=>[t(m(pt))]),_:1})]),_:1}),me(b.$slots,"customActions",{},void 0,!0)]),t(v,{style:{"padding-right":"10px"}},{default:a(()=>[t(j,null,{default:a(()=>[(g(!0),E(U,null,B(e.value,($,W)=>(g(),y(I,{key:b.retrieveKey($,W)},{title:a(()=>[me(b.$slots,"itemTitle",{item:$,key:W},()=>[h(T(W),1)],!0),Array.isArray(e.value)?(g(),E(U,{key:0},[W!==0?(g(),y(A,{key:0,class:"icon",onClick:G(fe=>f(W),["stop"])},{default:a(()=>[t(m(je))]),_:2},1032,["onClick"])):L("",!0),W<e.value.length-1?(g(),y(A,{key:1,class:"icon",onClick:G(fe=>k(W),["stop"])},{default:a(()=>[t(m(Le))]),_:2},1032,["onClick"])):L("",!0)],64)):L("",!0),t(A,{class:"icon",onClick:G(fe=>c(W),["stop"])},{default:a(()=>[t(m(gt))]),_:2},1032,["onClick"]),t(A,{class:"icon",onClick:G(fe=>s(W),["stop"])},{default:a(()=>[t(m(pe))]),_:2},1032,["onClick"])]),default:a(()=>[t(F,{"label-position":"top"},{default:a(()=>[me(b.$slots,"default",{item:$,key:W},void 0,!0)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})],2),t(dt,{modelValue:u.value,"onUpdate:modelValue":_[4]||(_[4]=$=>u.value=$),title:n.dialogTitle},{footer:a(()=>[S("span",null,[t(Re,{onClick:_[2]||(_[2]=$=>u.value=!1)},{default:a(()=>[h("\u53D6\u6D88")]),_:1}),t(Re,{type:"primary",disabled:!r.value,onClick:_[3]||(_[3]=$=>d())},{default:a(()=>[h(" \u6DFB\u52A0 ")]),_:1},8,["disabled"])])]),default:a(()=>[S("div",Bl,T(n.dialogPrompt),1),t(w,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=$=>o.value=$)},null,8,["modelValue"]),ge(t(x,{type:"danger"},{default:a(()=>[h(T(n.dialogErrorText),1)]),_:1},512),[[be,!r.value]])]),_:1},8,["modelValue","title"])],64)}}}),Ee=(l,e)=>{const n=l.__vccOpts||l;for(const[u,o]of e)n[u]=o;return n},J=Ee(Tl,[["__scopeId","data-v-6ef516a3"]]),Ol="modulepreload",Fl=function(l,e){return new URL(l,e).href},Se={},Ce=function(l,e,n){let u=Promise.resolve();if(e&&e.length>0){const o=document.getElementsByTagName("link");u=Promise.all(e.map(r=>{if(r=Fl(r,n),r in Se)return;Se[r]=!0;const d=r.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(n)for(let c=o.length-1;c>=0;c--){const f=o[c];if(f.href===r&&(!d||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${p}`))return;const s=document.createElement("link");if(s.rel=d?"stylesheet":Ol,d||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),d)return new Promise((c,f)=>{s.addEventListener("load",c),s.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})}))}return u.then(()=>l()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},xe=Object.assign({"./4x-1beat-basic.json":()=>Ce(()=>import("./4x-1beat-basic-DQjnCmK2.js"),__vite__mapDeps([]),import.meta.url),"./8x-3beat-basic.json":()=>Ce(()=>import("./8x-3beat-basic-BO-0meST.js"),__vite__mapDeps([]),import.meta.url)}),Ue=R({__name:"AbcNotationRenderer",props:{score:{},count:{}},setup(l){const e=l,n=N(null);function u(){if(n.value){const o=new Array(e.count).fill(null).map(()=>document.createElement("div"));ht.renderAbc(o,e.score),n.value.replaceChildren(...o)}}return vt(()=>{yt(()=>{u()})}),(o,r)=>(g(),E("div",{ref_key:"abcContainer",ref:n},null,512))}}),ql=R({__name:"PatternsPane",setup(l){const e=q();function n(u){xe[u]().then(({patterns:o})=>{Object.assign(e.config.patterns,o)})}return(u,o)=>{const r=i("el-icon"),d=i("el-button"),p=i("el-dropdown-item"),s=i("el-dropdown-menu"),c=i("el-dropdown"),f=i("ElInputNumber"),k=i("ElFormItem"),b=i("ElInput");return g(),y(J,{modelValue:m(e).config.patterns,"onUpdate:modelValue":o[0]||(o[0]=_=>m(e).config.patterns=_),"default-new-item-value":()=>({length:1}),"dialog-title":"\u6DFB\u52A0\u8282\u594F\u578B","dialog-prompt":"\u8BF7\u4E3A\u8282\u594F\u578B\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u8282\u594F\u578B\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u8282\u594F\u578B\u91CD\u590D\u3002"},{customActions:a(()=>[t(c,{style:{"margin-left":"8px"},onCommand:n},{dropdown:a(()=>[t(s,null,{default:a(()=>[(g(!0),E(U,null,B(Object.keys(m(xe)),_=>(g(),y(p,{key:_,command:_},{default:a(()=>[h(T(_.substring(2,_.length-5)),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:a(()=>[t(d,null,{default:a(()=>[h(" \u5BFC\u5165\u8282\u594F\u578B "),t(r,{class:"el-icon--right"},{default:a(()=>[t(m(wt))]),_:1})]),_:1})]),_:1})]),default:a(({item:_})=>[t(k,{label:"\u957F\u5EA6length",required:""},{default:a(()=>[t(f,{modelValue:_.length,"onUpdate:modelValue":A=>_.length=A},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(k,{label:"\u663E\u793A\u540D\u79F0displayName"},{default:a(()=>[t(b,{modelValue:_.displayName,"onUpdate:modelValue":A=>_.displayName=A},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(k,{label:"ABC\u683C\u5F0F\u663E\u793A\u5185\u5BB9displayAbc (\u9ED8\u8BA4L: 1/16)"},{default:a(()=>[t(b,{modelValue:_.displayAbc,"onUpdate:modelValue":A=>_.displayAbc=A},null,8,["modelValue","onUpdate:modelValue"]),t(Ue,{score:`
X: 0
V: T1 stem=up
K: none perc stafflines=1 middle=A
L: 1/16
${_.displayAbc?_.displayAbc:""}
`,count:1},null,8,["score"])]),_:2},1024)]),_:1},8,["modelValue"])}}}),Ml=R({__name:"CategoriesPane",setup(l){const e=q();return(n,u)=>{const o=i("ElOption"),r=i("ElSelect"),d=i("ElFormItem");return g(),y(J,{modelValue:m(e).config.categories,"onUpdate:modelValue":u[0]||(u[0]=p=>m(e).config.categories=p),"default-new-item-value":()=>[],"dialog-title":"\u6DFB\u52A0\u7C7B\u522B","dialog-prompt":"\u8BF7\u4E3A\u8282\u594F\u578B\u7C7B\u522B\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u7C7B\u522B\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u7C7B\u522B\u540D\u91CD\u590D\u3002"},{default:a(({key:p})=>[t(d,{required:""},{default:a(()=>[t(r,{modelValue:m(e).config.categories[p],"onUpdate:modelValue":s=>m(e).config.categories[p]=s,multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,B(m(e).config.patterns,(s,c)=>(g(),y(o,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1},8,["modelValue"])}}}),$l=R({__name:"FillEachBlankActionView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=l;return(u,o)=>{const r=i("ElOption"),d=i("ElSelect"),p=i("ElFormItem"),s=i("ElCard");return e.value?(g(),E(U,{key:0},[t(p,{label:"\u533A\u57DF\u8303\u56F4in",required:""},{default:a(()=>[t(d,{modelValue:e.value.in,"onUpdate:modelValue":o[0]||(o[0]=c=>e.value.in=c),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,B(n.parentRuleSet.layout,(c,f)=>(g(),y(r,{key:f,label:f,value:f},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u8C03\u7528\u52A8\u4F5Cwith",required:""},{default:a(()=>[t(s,{shadow:"never",style:{width:"100%"},class:"card-remove-last-margin-bottom"},{default:a(()=>[t(se,{modelValue:e.value.with,"onUpdate:modelValue":o[1]||(o[1]=c=>e.value.with=c),mode:"action","parent-rule-set":u.parentRuleSet},null,8,["modelValue","parent-rule-set"])]),_:1})]),_:1})],64)):L("",!0)}}}),Wl=R({__name:"ChooseARandomPositionActionView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=l;return(u,o)=>{const r=i("ElOption"),d=i("ElSelect"),p=i("ElFormItem"),s=i("ElInputNumber"),c=i("ElCard");return e.value?(g(),E(U,{key:0},[t(p,{label:"\u533A\u57DF\u8303\u56F4in",required:""},{default:a(()=>[t(d,{modelValue:e.value.in,"onUpdate:modelValue":o[0]||(o[0]=f=>e.value.in=f),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,B(n.parentRuleSet.layout,(f,k)=>(g(),y(r,{key:k,label:k,value:k},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u957F\u5EA6length",required:""},{default:a(()=>[t(s,{modelValue:e.value.length,"onUpdate:modelValue":o[1]||(o[1]=f=>e.value.length=f)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u8C03\u7528\u52A8\u4F5Cdo",required:""},{default:a(()=>[t(c,{shadow:"never",style:{width:"100%"},class:"card-remove-last-margin-bottom"},{default:a(()=>[t(se,{modelValue:e.value.do,"onUpdate:modelValue":o[2]||(o[2]=f=>e.value.do=f),mode:"action","parent-rule-set":u.parentRuleSet},null,8,["modelValue","parent-rule-set"])]),_:1})]),_:1})],64)):L("",!0)}}}),Ae=R({__name:"RandomPickActionView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=q(),n=Y(l,"modelValue"),u=l;return(o,r)=>{const d=i("ElOption"),p=i("ElSelect"),s=i("ElButton"),c=i("ElFormItem"),f=i("ElInputNumber"),k=i("ElCard");return n.value?(g(),E(U,{key:0},[t(c,{label:"\u4ECE\u5206\u7C7B\u4E2D\u9009\u53D6\u8282\u594F\u578BfromCategories"},{default:a(()=>[n.value.fromCategories?(g(),y(p,{key:0,modelValue:n.value.fromCategories,"onUpdate:modelValue":r[0]||(r[0]=b=>n.value.fromCategories=b),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,B(m(e).config.categories,(b,_)=>(g(),y(d,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(g(),y(s,{key:1,onClick:r[1]||(r[1]=b=>n.value.fromCategories=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1}),t(c,{label:"\u4ECE\u6B64\u5217\u8868\u4E2D\u9009\u53D6\u8282\u594F\u578BfromList"},{default:a(()=>[n.value.fromList?(g(),y(p,{key:0,modelValue:n.value.fromList,"onUpdate:modelValue":r[2]||(r[2]=b=>n.value.fromList=b),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,B(m(e).config.patterns,(b,_)=>(g(),y(d,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(g(),y(s,{key:1,onClick:r[3]||(r[3]=b=>n.value.fromList=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1}),t(c,{label:"\u6700\u5927\u957F\u5EA6maxLength"},{default:a(()=>[t(f,{modelValue:n.value.maxLength,"onUpdate:modelValue":r[4]||(r[4]=b=>n.value.maxLength=b)},null,8,["modelValue"])]),_:1}),t(c,{label:"\u5728\u6B64\u5E03\u5C40\u533A\u57DF\u5F00\u5934\u653E\u7F6Ein"},{default:a(()=>[t(p,{modelValue:n.value.in,"onUpdate:modelValue":r[5]||(r[5]=b=>n.value.in=b),filterable:""},{default:a(()=>[(g(!0),E(U,null,B(u.parentRuleSet.layout,(b,_)=>(g(),y(d,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u5728\u6307\u5B9A\u8282\u62CD\u4F4D\u7F6E\u653E\u7F6E(0\u8D77\u8BA1\u6570)at"},{default:a(()=>[t(f,{modelValue:n.value.at,"onUpdate:modelValue":r[6]||(r[6]=b=>n.value.at=b)},null,8,["modelValue"])]),_:1}),t(c,{label:"\u7EA6\u675Fconstraints"},{default:a(()=>[n.value.constraints?(g(),y(k,{key:0,shadow:"never",style:{width:"100%"}},{default:a(()=>[t(J,{modelValue:n.value.constraints,"onUpdate:modelValue":r[7]||(r[7]=b=>n.value.constraints=b),"default-new-item-value":()=>({type:"Blank"}),"disable-scroll":!1,"retrieve-key":m(ke)},{itemTitle:a(({item:b,key:_})=>[h(T(_)+" : "+T(b.type),1)]),default:a(({key:b})=>[t(se,{modelValue:n.value.constraints[b],"onUpdate:modelValue":_=>n.value.constraints[b]=_,mode:"constraint","parent-rule-set":u.parentRuleSet},null,8,["modelValue","onUpdate:modelValue","parent-rule-set"])]),_:1},8,["modelValue","retrieve-key"])]),_:1})):(g(),y(s,{key:1,onClick:r[8]||(r[8]=b=>n.value.constraints=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1})],64)):L("",!0)}}}),Dl=R({__name:"UsageCountGroupConstraintView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue");return(n,u)=>{const o=i("ElInput"),r=i("ElFormItem");return e.value?(g(),y(r,{key:0,label:"\u540D\u79F0name",required:""},{default:a(()=>[t(o,{modelValue:e.value.name,"onUpdate:modelValue":u[0]||(u[0]=d=>e.value.name=d)},null,8,["modelValue"])]),_:1})):L("",!0)}}}),zl={style:{"margin-top":"4px",display:"flex","align-items":"center"}},Kl=R({__name:"RejectPatternWithUsageCountConstraintView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=Q(()=>e.value.value==="max"||e.value.value==="maxAutoBalance"||typeof e.value.value=="number");return(u,o)=>{const r=i("ElRadio"),d=i("ElRadioGroup"),p=i("ElFormItem"),s=i("ElInput"),c=i("ElOption"),f=i("ElSelect"),k=i("ElText"),b=i("ElButton");return e.value?(g(),E(U,{key:0},[t(p,{label:"\u5C42\u7EA7level",required:""},{default:a(()=>[t(d,{modelValue:e.value.level,"onUpdate:modelValue":o[0]||(o[0]=_=>e.value.level=_)},{default:a(()=>[t(r,{value:"batch"},{default:a(()=>[h("\u6279\u6B21batch")]),_:1}),t(r,{value:"piece"},{default:a(()=>[h("\u6761\u76EEpiece")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u8BA1\u6570\u7EC4\u540D\u79F0groupName",required:""},{default:a(()=>[t(s,{modelValue:e.value.groupName,"onUpdate:modelValue":o[1]||(o[1]=_=>e.value.groupName=_)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u6BD4\u8F83\u8FD0\u7B97\u7B26comparator",required:""},{default:a(()=>[t(f,{modelValue:e.value.comparator,"onUpdate:modelValue":o[2]||(o[2]=_=>e.value.comparator=_)},{default:a(()=>[(g(),E(U,null,B(["<","<=","==",">=",">","!="],_=>t(c,{key:_,label:_,value:_},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u6BD4\u8F83\u503Cvalue",required:""},{default:a(()=>[t(s,{modelValue:e.value.value,"onUpdate:modelValue":o[3]||(o[3]=_=>e.value.value=_),modelModifiers:{number:!0}},null,8,["modelValue"]),S("div",zl,[t(k,{size:"small"},{default:a(()=>[h("\u7279\u6B8A\u503C\uFF1A")]),_:1}),t(b,{size:"small",onClick:o[4]||(o[4]=_=>e.value.value="max")},{default:a(()=>[h("max")]),_:1}),t(b,{size:"small",onClick:o[5]||(o[5]=_=>e.value.value="maxAutoBalance")},{default:a(()=>[h("maxAutoBalance")]),_:1})]),ge(t(k,{type:"danger"},{default:a(()=>[h("value\u503C\u65E0\u6548\uFF0C\u5E94\u4E3A\u6570\u5B57\u6216\u201Cmax\u201D\uFF0C\u201CmaxAutoBalance\u201D")]),_:1},512),[[be,!n.value]])]),_:1})],64)):L("",!0)}}}),{allActions:Ql,allConstraints:Gl,optionsRegistry:Pe}=function(){const l={Blank:{defaults:()=>({type:"Blank"}),view:{}},FillEachBlank:{defaults:()=>({type:"FillEachBlank",in:[],with:{type:"Blank"}}),view:$l},ChooseARandomPosition:{defaults:()=>({type:"ChooseARandomPosition",in:[],length:1,do:{type:"Blank"}}),view:Wl},RandomPick:{defaults:()=>({type:"RandomPick"}),view:Ae},PickSequentially:{defaults:()=>({type:"PickSequentially"}),view:Ae}},e={Blank:{defaults:()=>({type:"Blank"}),view:{}},UsageCountGroup:{defaults:()=>({type:"UsageCountGroup",name:""}),view:Dl},RejectPatternWithUsageCount:{defaults:()=>({type:"RejectPatternWithUsageCount",level:"piece",groupName:"",comparator:">=",value:"maxAutoBalance"}),view:Kl}};return{allActions:Object.keys(l),allConstraints:Object.keys(e),optionsRegistry:{...l,...e}}}(),se=R({__name:"XObjEditor",props:H({mode:{},parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=Q({get:()=>e.value.type,set:u=>{e.value={...Pe[u].defaults(),[K]:e.value[K]}}});return(u,o)=>{const r=i("ElOption"),d=i("ElSelect"),p=i("ElFormItem");return g(),E(U,null,[t(p,{label:"\u7C7B\u578Btype",required:""},{default:a(()=>[t(d,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=s=>n.value=s),filterable:""},{default:a(()=>[(g(!0),E(U,null,B(u.mode==="action"?m(Ql):m(Gl),s=>(g(),y(r,{key:s,value:s},null,8,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.value.type!=="Blank"?(g(),y(Be(m(Pe)[e.value.type].view),{key:0,modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value=s),"parent-rule-set":u.parentRuleSet},null,8,["modelValue","parent-rule-set"])):L("",!0)],64)}}}),Xl=R({__name:"RuleSetsPane",setup(l){const e=q(),n=N(0),u=N("");function o(r,d){d([{value:"[M: 4/4] [Q: 1/4=72]",label:"[M: 4/4] [Q: 1/4=72]\uFF08\u66F4\u6362\u62CD\u53F7\u5E76\u66F4\u6539\u901F\u5EA6\uFF09"},{value:"[M: 4/4]",label:"[M: 4/4]\uFF08\u66F4\u6362\u62CD\u53F7\uFF09"},{value:"|",label:"|\uFF08\u5C0F\u8282\u7EBF\uFF09"},{value:"[Q: 1/4=72]",label:"[Q: 1/4=72]\uFF08\u66F4\u6539\u901F\u5EA6\uFF09"}])}return(r,d)=>{const p=i("ElInputNumber"),s=i("ElFormItem"),c=i("el-autocomplete"),f=i("ElButton"),k=i("ElForm"),b=i("el-table-column"),_=i("ElIcon"),A=i("ElTableColumn"),O=i("el-table"),F=i("ElCard");return g(),y(J,{modelValue:m(e).config.ruleSets,"onUpdate:modelValue":d[2]||(d[2]=I=>m(e).config.ruleSets=I),"default-new-item-value":()=>({scoreInsertions:{0:"[M: 4/4] [Q: 1/4=72]"},pieceLength:8,layout:{},actions:[]}),"dialog-title":"\u6DFB\u52A0\u89C4\u5219\u96C6","dialog-prompt":"\u8BF7\u4E3A\u89C4\u5219\u96C6\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u89C4\u5219\u96C6\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u89C4\u5219\u96C6\u91CD\u590D\u3002"},{default:a(({item:I,key:j})=>[t(s,{label:"\u4E50\u8C31\u63D2\u5165\u6587\u672CscoreInsertions",required:""},{default:a(()=>[t(F,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(k,{inline:""},{default:a(()=>[t(s,null,{default:a(()=>[t(p,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=v=>n.value=v),placeholder:"\u8282\u62CD\u5E8F\u53F7\uFF08\u96F6\u8D77\uFF09beatIndex"},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(c,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=v=>u.value=v),placeholder:"\u5185\u5BB9content","fetch-suggestions":o},{default:a(({item:v})=>[h(T(v.label),1)]),_:2},1032,["modelValue"])]),_:2},1024),t(s,null,{default:a(()=>[t(f,{onClick:v=>I.scoreInsertions[n.value]=u.value},{default:a(()=>[h("\u6DFB\u52A0")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(O,{data:Object.entries(I.scoreInsertions)},{default:a(()=>[t(b,{prop:"0",label:"\u8282\u62CD\u5E8F\u53F7\uFF08\u96F6\u8D77\uFF09beatIndex"}),t(b,{prop:"1",label:"\u5185\u5BB9content"}),t(A,{label:"\u64CD\u4F5C",width:"55px"},{default:a(v=>[t(f,{link:"",onClick:G(w=>delete I.scoreInsertions[v.row[0]],["prevent"])},{default:a(()=>[t(_,null,{default:a(()=>[t(m(pe))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])]),_:2},1024)]),_:2},1024),t(s,{label:"\u6BCF\u6761\u957F\u5EA6pieceLength",required:""},{default:a(()=>[t(p,{modelValue:I.pieceLength,"onUpdate:modelValue":v=>I.pieceLength=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u5E03\u5C40layout",required:""},{default:a(()=>[t(F,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(J,{modelValue:m(e).config.ruleSets[j].layout,"onUpdate:modelValue":v=>m(e).config.ruleSets[j].layout=v,"default-new-item-value":()=>({start:0,end:I.pieceLength}),"dialog-title":"\u6DFB\u52A0\u5E03\u5C40\u533A\u57DF","dialog-prompt":"\u8BF7\u4E3A\u5E03\u5C40\u533A\u57DF\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u5E03\u5C40\u533A\u57DF\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u5E03\u5C40\u533A\u57DF\u91CD\u590D\u3002","disable-scroll":!1},{default:a(({item:v})=>[t(s,{label:"\u8D77\u70B9(\u542B)start",required:""},{default:a(()=>[t(p,{modelValue:v.start,"onUpdate:modelValue":w=>v.start=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u7EC8\u70B9(\u4E0D\u542B)end",required:""},{default:a(()=>[t(p,{modelValue:v.end,"onUpdate:modelValue":w=>v.end=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","default-new-item-value"])]),_:2},1024)]),_:2},1024),t(s,{label:"\u52A8\u4F5Cactions",required:""},{default:a(()=>[t(F,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(J,{modelValue:m(e).config.ruleSets[j].actions,"onUpdate:modelValue":v=>m(e).config.ruleSets[j].actions=v,"default-new-item-value":()=>({type:"Blank"}),"disable-scroll":!1,"retrieve-key":m(ke)},{itemTitle:a(({item:v,key:w})=>[h(T(w)+" : "+T(v.type),1)]),default:a(({key:v})=>[t(se,{modelValue:m(e).config.ruleSets[j].actions[v],"onUpdate:modelValue":w=>m(e).config.ruleSets[j].actions[v]=w,mode:"action","parent-rule-set":m(e).config.ruleSets[j]},null,8,["modelValue","onUpdate:modelValue","parent-rule-set"])]),_:2},1032,["modelValue","onUpdate:modelValue","retrieve-key"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])}}}),Jl={style:{display:"flex","justify-content":"flex-end"}},Hl=R({__name:"BatchPresetsPane",setup(l){const e=q(),n=N(""),u=N(1);function o(s){e.config.batchPresets&&e.config.batchPresets[s].push({ruleSetName:n.value,amount:u.value})}function r(s,c){e.config.batchPresets&&e.config.batchPresets[s].splice(c,1)}function d(s,c){if(e.config.batchPresets){let f=e.config.batchPresets[s].splice(c,1);e.config.batchPresets[s].splice(c-1,0,...f)}}function p(s,c){if(e.config.batchPresets){let f=e.config.batchPresets[s].splice(c,1);e.config.batchPresets[s].splice(c+1,0,...f)}}return(s,c)=>{const f=i("ElOption"),k=i("ElSelect"),b=i("ElFormItem"),_=i("ElInputNumber"),A=i("ElButton"),O=i("ElForm"),F=i("ElTableColumn"),I=i("ElIcon"),j=i("ElTable");return m(e).config.batchPresets?(g(),y(J,{key:0,modelValue:m(e).config.batchPresets,"onUpdate:modelValue":c[2]||(c[2]=v=>m(e).config.batchPresets=v),"default-new-item-value":()=>[],"dialog-title":"\u6DFB\u52A0\u6279\u91CF\u751F\u6210\u9884\u8BBE","dialog-prompt":"\u8BF7\u4E3A\u6279\u91CF\u751F\u6210\u9884\u8BBE\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u9884\u8BBE\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u6279\u91CF\u751F\u6210\u9884\u8BBE\u91CD\u590D\u3002"},{default:a(({key:v})=>[t(O,{inline:"",style:{display:"flex"}},{default:a(()=>[t(b,{style:{width:"calc((100% - 110px) * 0.5)"}},{default:a(()=>[t(k,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=w=>n.value=w),placeholder:"\u89C4\u5219\u96C6\u540D\u79F0ruleSetName",filterable:""},{default:a(()=>[(g(!0),E(U,null,B(Object.keys(m(e).config.ruleSets),w=>(g(),y(f,{key:w,label:w,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(_,{modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=w=>u.value=w),placeholder:"\u6570\u91CFamount"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(A,{onClick:w=>o(v)},{default:a(()=>[h("\u6DFB\u52A0")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(j,{data:m(e).config.batchPresets[v]},{default:a(()=>[t(F,{prop:"ruleSetName",label:"\u89C4\u5219\u96C6\u540D\u79F0ruleSetName"}),t(F,{prop:"amount",label:"\u6570\u91CFamount"}),t(F,{label:"\u64CD\u4F5C",width:"110px"},{default:a(w=>[S("div",Jl,[w.$index>0?(g(),y(A,{key:0,link:"",onClick:G(x=>d(v,w.$index),["stop"])},{default:a(()=>[t(I,null,{default:a(()=>[t(m(je))]),_:1})]),_:2},1032,["onClick"])):L("",!0),w.$index<m(e).config.batchPresets[v].length-1?(g(),y(A,{key:1,link:"",onClick:G(x=>p(v,w.$index),["stop"])},{default:a(()=>[t(I,null,{default:a(()=>[t(m(Le))]),_:1})]),_:2},1032,["onClick"])):L("",!0),t(A,{link:"",onClick:G(x=>r(v,w.$index),["prevent"])},{default:a(()=>[t(I,null,{default:a(()=>[t(m(pe))]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["data"])]),_:1},8,["modelValue"])):(g(),y(A,{key:1,onClick:c[3]||(c[3]=v=>m(e).config.batchPresets={})},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))}}}),Yl=R({__name:"SettingsPane",setup(l){const e=q();return Vt(()=>{var n;return(n=e.config.settings)==null?void 0:n.autoSeed},n=>{n&&delete e.config.settings.fixedSeed}),(n,u)=>{const o=i("ElSwitch"),r=i("ElFormItem"),d=i("ElInput"),p=i("ElForm"),s=i("ElButton");return m(e).config.settings?(g(),y(p,{key:0,"label-position":"top"},{default:a(()=>[t(r,{label:"\u81EA\u52A8\u8BBE\u7F6E\u968F\u673A\u6570\u79CD\u5B50autoSeed"},{default:a(()=>[t(o,{modelValue:m(e).config.settings.autoSeed,"onUpdate:modelValue":u[0]||(u[0]=c=>m(e).config.settings.autoSeed=c)},null,8,["modelValue"])]),_:1}),ge(t(r,{label:"\u56FA\u5B9A\u79CD\u5B50\u6570\u503CfixedSeed"},{default:a(()=>[t(d,{modelValue:m(e).config.settings.fixedSeed,"onUpdate:modelValue":u[1]||(u[1]=c=>m(e).config.settings.fixedSeed=c),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},512),[[be,!m(e).config.settings.autoSeed]])]),_:1})):(g(),y(s,{key:1,onClick:u[2]||(u[2]=c=>m(e).config.settings={})},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))}}}),Ie=R({__name:"EditorPage",setup(l){const e=q(),n=de();return(u,o)=>{const r=i("el-text"),d=i("ElTabPane"),p=i("ElTabs"),s=i("ElCol"),c=i("ElScrollbar"),f=i("ElRow");return g(),y(f,{class:"disable-scroll"},{default:a(()=>[t(s,{span:16,class:"disable-scroll"},{default:a(()=>[m(n).currentStep==="edit-err"?(g(),y(r,{key:0,type:"danger"},{default:a(()=>[h(" \u9519\u8BEF\uFF1A"+T(m(n).errorMsg),1)]),_:1})):L("",!0),t(p,{"tab-position":"left",class:"disable-scroll"},{default:a(()=>[t(d,{label:"\u8282\u594F\u578B\u5217\u8868patterns",class:"disable-scroll"},{default:a(()=>[t(ql)]),_:1}),t(d,{label:"\u8282\u594F\u578B\u5206\u7C7Bcategories",class:"disable-scroll"},{default:a(()=>[t(Ml)]),_:1}),t(d,{label:"\u89C4\u5219\u96C6ruleSets",class:"disable-scroll"},{default:a(()=>[t(Xl)]),_:1}),t(d,{label:"\u6279\u91CF\u751F\u6210\u9884\u8BBEbatchPresets",class:"disable-scroll"},{default:a(()=>[t(Hl)]),_:1}),t(d,{label:"\u751F\u6210\u5668\u8BBE\u7F6Esettings",class:"disable-scroll"},{default:a(()=>[t(Yl)]),_:1})]),_:1})]),_:1}),t(s,{span:8,class:"disable-scroll"},{default:a(()=>[t(c,null,{default:a(()=>[S("code",null,[S("pre",null,T(m(_e).stringify(m(e).config)),1)])]),_:1})]),_:1})]),_:1})}}}),Zl=R({__name:"ResultPage",setup(l){const e=de(),n=q(),u=Q(()=>ye(e.generationResult,n.config));return(o,r)=>{const d=i("el-text"),p=i("ElScrollbar");return g(),y(p,null,{default:a(()=>[m(e).currentStep==="exec-err"?(g(),y(d,{key:0,type:"danger"},{default:a(()=>[h(" \u9519\u8BEF\uFF1A"+T(m(e).errorMsg),1)]),_:1})):(g(),y(Ue,{key:1,score:u.value,count:m(e).generationResult.length},null,8,["score","count"]))]),_:1})}}}),Z=l=>(Et("data-v-706c9bac"),l=l(),St(),l),et={style:{"margin-left":"50px","margin-right":"50px",flex:"1"}},lt={style:{"margin-left":"auto"}},tt=Z(()=>S("h1",null,"Rhythmologist",-1)),at=Z(()=>S("p",null,"Copyright \xA9 2024 Liu Chibing. All rights reserved.",-1)),nt=Z(()=>S("h2",null,"\u9E23\u8C22",-1)),ot=Z(()=>S("p",null,"\u738B\u6654 \u6559\u6388",-1)),ut=Z(()=>S("h3",null,"\u5F00\u6E90\u4EE3\u7801",-1)),rt=Z(()=>S("ul",null,[S("li",null,"abcjs"),S("li",null,"Vue"),S("li",null,"Element Plus"),S("li",null,"TypeScript"),S("li",null,"Rust"),S("li",null,"Electron")],-1)),it=R({__name:"App",setup(l){const e=de(),n=q(),u=Q(()=>{switch(e.currentStep){case"editing":case"edit-err":return 1;case"running":case"exec-err":case"result":return 2;default:return 0}}),o=Q(()=>{switch(e.currentStep){case"editing":return"process";case"edit-err":return"error";case"running":case"exec-err":case"result":return"success";default:return"wait"}}),r=Q(()=>{switch(e.currentStep){case"editing":case"edit-err":return"wait";case"running":return"process";case"exec-err":return"error";case"result":return"success";default:return"wait"}}),d=Q(()=>{switch(e.currentStep){case"editing":case"edit-err":return Ie;case"running":case"exec-err":case"result":return Zl;default:return Ie}}),p=N(!1),s=N(!1);return(c,f)=>{const k=i("ElStep"),b=i("ElSteps"),_=i("ElOption"),A=i("ElSelect"),O=i("ElButton"),F=i("ElHeader"),I=i("ElMain"),j=i("ElContainer"),v=i("ElDialog"),w=i("el-button");return g(),E(U,null,[t(j,{class:"disable-scroll"},{default:a(()=>[t(F,null,{default:a(()=>[S("h1",{onClick:f[0]||(f[0]=x=>p.value=!0)},"Rhythmologist"),S("div",et,[t(b,{simple:"",active:u.value},{default:a(()=>[t(k,{title:"\u914D\u7F6E\u7F16\u8F91",status:o.value},null,8,["status"]),t(k,{title:"\u8FD0\u884C\u7ED3\u679C",status:r.value},null,8,["status"])]),_:1},8,["active"])]),S("div",lt,[m(n).config.batchPresets?(g(),y(A,{key:0,modelValue:m(e).selectedPresetName,"onUpdate:modelValue":f[1]||(f[1]=x=>m(e).selectedPresetName=x),placeholder:"\u9009\u62E9\u751F\u6210\u9884\u8BBE",style:{width:"150px","margin-right":"12px"}},{default:a(()=>[(g(!0),E(U,null,B(Object.keys(m(n).config.batchPresets),x=>(g(),y(_,{key:x,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):L("",!0),t(O,{disabled:!m(n).config.batchPresets||!(m(e).selectedPresetName in m(n).config.batchPresets),onClick:f[2]||(f[2]=x=>m(e).run())},{default:a(()=>[h(" \u8FD0\u884C ")]),_:1},8,["disabled"]),u.value===1?(g(),E(U,{key:1},[t(O,{onClick:f[3]||(f[3]=x=>m(n).load())},{default:a(()=>[h("\u6253\u5F00")]),_:1}),t(O,{onClick:f[4]||(f[4]=x=>m(n).save())},{default:a(()=>[h("\u4FDD\u5B58")]),_:1})],64)):(g(),E(U,{key:2},[t(O,{onClick:f[5]||(f[5]=x=>s.value=!0)},{default:a(()=>[h("\u5BFC\u51FA")]),_:1}),t(O,{onClick:f[6]||(f[6]=x=>m(e).edit())},{default:a(()=>[h("\u8FD4\u56DE\u7F16\u8F91")]),_:1})],64))])]),_:1}),t(I,{class:"disable-scroll"},{default:a(()=>[(g(),y(kt,null,[(g(),y(Be(d.value)))],1024))]),_:1})]),_:1}),t(v,{modelValue:p.value,"onUpdate:modelValue":f[7]||(f[7]=x=>p.value=x),title:"\u5173\u4E8E",class:"about-dialog"},{default:a(()=>[tt,at,nt,ot,ut,rt]),_:1},8,["modelValue"]),t(v,{modelValue:s.value,"onUpdate:modelValue":f[10]||(f[10]=x=>s.value=x),title:"\u5BFC\u51FA"},{default:a(()=>[t(w,{onClick:f[8]||(f[8]=x=>m(e).exportAbc())},{default:a(()=>[h("\u5BFC\u51FAabc\uFF08\u4E00\u7EBF\u8C31\uFF09")]),_:1}),t(w,{onClick:f[9]||(f[9]=x=>m(e).exportAbc(!0))},{default:a(()=>[h("\u5BFC\u51FAabc\uFF08\u666E\u901A\u4E94\u7EBF\u8C31\uFF09")]),_:1})]),_:1},8,["modelValue"])],64)}}}),st=Ee(it,[["__scopeId","data-v-706c9bac"]]),ce=Ct(st);ce.use(xt()),ce.use(Ut),ce.mount("#app")});
