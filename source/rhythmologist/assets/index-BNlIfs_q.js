import{d as Se,r as A,u as ot,Y as me,E as ut,h as rt,w as it,a as R,m as H,b as Q,c as Y,e as i,o as _,f as S,g as E,i as t,j as a,k as m,p as dt,F as C,l as q,n as y,q as Ce,s as h,t as T,v as D,x as Ue,y as B,z as xe,A as st,B as _e,C as ct,D as pe,G as ge,H as Pe,I as ft,J as mt,K as _t,L as pt,M as gt,N as bt,O as vt,P as yt,Q as Vt,R as wt,__tla as ht}from"./vendor-Df1kOD3n.js";Promise.all([(()=>{try{return ht}catch{}})()]).then(async()=>{(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const r of u.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();const L=Se("config",()=>{const l=A({patterns:{},categories:{},ruleSets:{}}),{open:e,reset:n,onChange:o}=ot({accept:".yaml,.yml,text/vnd.yaml"});o(f=>{var s;f&&((s=f.item(0))==null||s.text().then(c=>{l.value=me.parse(c)}).catch(c=>{ut.alert(rt("pre",{class:"err-msg-box",style:{whiteSpace:"pre-wrap"}},`\u6253\u5F00\u6587\u4EF6\u65F6\u9047\u5230\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u662F\u5426\u6B63\u786E\u3002
\u9519\u8BEF\u4FE1\u606F\uFF1A
${c}`),"\u9519\u8BEF",{type:"error"})}).finally(()=>n()))});function u(){e()}function r(){const f=me.stringify(l.value),s=new File([f],"config.yaml"),c=URL.createObjectURL(s),d=document.createElement("a");d.href=c,d.download="config.yaml",d.click(),setTimeout(()=>{URL.revokeObjectURL(c),d.remove()},100)}return{config:l,load:u,save:r}}),Ie=""+new URL("rhythmologist_core_bg-DCjiwKJq.wasm",import.meta.url).href,Re=async(l={},e)=>{let n;if(e.startsWith("data:")){const o=e.replace(/^data:.*?base64,/,"");let u;if(typeof Buffer=="function"&&typeof Buffer.from=="function")u=Buffer.from(o,"base64");else if(typeof atob=="function"){const r=atob(o);u=new Uint8Array(r.length);for(let f=0;f<r.length;f++)u[f]=r.charCodeAt(f)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(u,l)}else{const o=await fetch(e),u=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&u.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(o,l);else{const r=await o.arrayBuffer();n=await WebAssembly.instantiate(r,l)}}return n.instance.exports};let x;function Ae(l){x=l}const Be=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let be=new Be("utf-8",{ignoreBOM:!0,fatal:!0});be.decode();let le=null;function te(){return(le===null||le.byteLength===0)&&(le=new Uint8Array(x.memory.buffer)),le}function ae(l,e){return l=l>>>0,be.decode(te().subarray(l,l+e))}const $=new Array(128).fill(void 0);$.push(void 0,null,!0,!1);let ee=$.length;function k(l){ee===$.length&&$.push($.length+1);const e=ee;return ee=$[e],$[e]=l,e}function w(l){return $[l]}function Ne(l){l<132||($[l]=ee,ee=l)}function ne(l){const e=w(l);return Ne(l),e}let oe=0;const qe=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let ue=new qe("utf-8");const Le=typeof ue.encodeInto=="function"?function(l,e){return ue.encodeInto(l,e)}:function(l,e){const n=ue.encode(l);return e.set(n),{read:l.length,written:n.length}};function ve(l,e,n){if(n===void 0){const s=ue.encode(l),c=e(s.length,1)>>>0;return te().subarray(c,c+s.length).set(s),oe=s.length,c}let o=l.length,u=e(o,1)>>>0;const r=te();let f=0;for(;f<o;f++){const s=l.charCodeAt(f);if(s>127)break;r[u+f]=s}if(f!==o){f!==0&&(l=l.slice(f)),u=n(u,o,o=f+l.length*3,1)>>>0;const s=te().subarray(u+f,u+o),c=Le(l,s);f+=c.written,u=n(u,o,f,1)>>>0}return oe=f,u}let re=null;function K(){return(re===null||re.byteLength===0)&&(re=new Int32Array(x.memory.buffer)),re}function Fe(l){try{const u=x.__wbindgen_add_to_stack_pointer(-16),r=ve(l,x.__wbindgen_malloc,x.__wbindgen_realloc),f=oe;x.parse_config(u,r,f);var e=K()[u/4+0],n=K()[u/4+1],o=K()[u/4+2];if(o)throw ne(n);return ie.__wrap(e)}finally{x.__wbindgen_add_to_stack_pointer(16)}}function je(l,e){if(!(l instanceof e))throw new Error(`expected instance of ${e.name}`);return l.ptr}function Oe(l,e){let n,o;try{const v=x.__wbindgen_add_to_stack_pointer(-16);je(l,ie);const U=ve(e,x.__wbindgen_malloc,x.__wbindgen_realloc),g=oe;x.generate_batch_json(v,l.__wbg_ptr,U,g);var u=K()[v/4+0],r=K()[v/4+1],f=K()[v/4+2],s=K()[v/4+3],c=u,d=r;if(s)throw c=0,d=0,ne(f);return n=c,o=d,ae(c,d)}finally{x.__wbindgen_add_to_stack_pointer(16),x.__wbindgen_free(n,o,1)}}function W(l,e){try{return l.apply(this,e)}catch(n){x.__wbindgen_exn_store(k(n))}}const ye=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(l=>x.__wbg_config_free(l>>>0));class ie{static __wrap(e){e=e>>>0;const n=Object.create(ie.prototype);return n.__wbg_ptr=e,ye.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ye.unregister(this),e}free(){const e=this.__destroy_into_raw();x.__wbg_config_free(e)}}function Me(l,e){const n=ae(l,e);return k(n)}function Te(l){ne(l)}function $e(l){const e=w(l).crypto;return k(e)}function We(l){const e=w(l);return typeof e=="object"&&e!==null}function Ge(l){const e=w(l).process;return k(e)}function ze(l){const e=w(l).versions;return k(e)}function De(l){const e=w(l).node;return k(e)}function Ke(l){return typeof w(l)=="string"}function Je(l){const e=w(l).msCrypto;return k(e)}function Xe(){return W(function(){const l=module.require;return k(l)},arguments)}function He(l){return typeof w(l)=="function"}function Qe(){return W(function(l,e){w(l).randomFillSync(ne(e))},arguments)}function Ye(){return W(function(l,e){w(l).getRandomValues(w(e))},arguments)}function Ze(l,e){const n=new Function(ae(l,e));return k(n)}function el(){return W(function(l,e){const n=w(l).call(w(e));return k(n)},arguments)}function ll(l){const e=w(l);return k(e)}function tl(){return W(function(){const l=self.self;return k(l)},arguments)}function al(){return W(function(){const l=window.window;return k(l)},arguments)}function nl(){return W(function(){const l=globalThis.globalThis;return k(l)},arguments)}function ol(){return W(function(){const l=global.global;return k(l)},arguments)}function ul(l){return w(l)===void 0}function rl(){return W(function(l,e,n){const o=w(l).call(w(e),w(n));return k(o)},arguments)}function il(l){const e=w(l).buffer;return k(e)}function dl(l,e,n){const o=new Uint8Array(w(l),e>>>0,n>>>0);return k(o)}function sl(l){const e=new Uint8Array(w(l));return k(e)}function cl(l,e,n){w(l).set(w(e),n>>>0)}function fl(l){const e=new Uint8Array(l>>>0);return k(e)}function ml(l,e,n){const o=w(l).subarray(e>>>0,n>>>0);return k(o)}function _l(l,e){throw new Error(ae(l,e))}function pl(){const l=x.memory;return k(l)}URL=globalThis.URL;const F=await Re({"./rhythmologist_core_bg.js":{__wbindgen_string_new:Me,__wbindgen_object_drop_ref:Te,__wbg_crypto_d05b68a3572bb8ca:$e,__wbindgen_is_object:We,__wbg_process_b02b3570280d0366:Ge,__wbg_versions_c1cb42213cedf0f5:ze,__wbg_node_43b1089f407e4ec2:De,__wbindgen_is_string:Ke,__wbg_msCrypto_10fc94afee92bd76:Je,__wbg_require_9a7e0f667ead4995:Xe,__wbindgen_is_function:He,__wbg_randomFillSync_b70ccbdf4926a99d:Qe,__wbg_getRandomValues_7e42b4fb8779dc6d:Ye,__wbg_newnoargs_cfecb3965268594c:Ze,__wbg_call_3f093dd26d5569f8:el,__wbindgen_object_clone_ref:ll,__wbg_self_05040bd9523805b9:tl,__wbg_window_adc720039f2cb14f:al,__wbg_globalThis_622105db80c1457d:nl,__wbg_global_f56b013ed9bcf359:ol,__wbindgen_is_undefined:ul,__wbg_call_67f2111acd2dfdb6:rl,__wbg_buffer_b914fb8b50ebbc3e:il,__wbg_newwithbyteoffsetandlength_0de9ee56e9f6ee6e:dl,__wbg_new_b1f2d6842d615181:sl,__wbg_set_7d988c98e6ced92d:cl,__wbg_newwithlength_0d03cef43b68a530:fl,__wbg_subarray_adc418253d76e2f1:ml,__wbindgen_throw:_l,__wbindgen_memory:pl}},Ie),gl=F.memory,bl=F.parse_config,vl=F.generate_batch_yaml,yl=F.generate_batch_json,Vl=F.__wbg_config_free,wl=F.__wbindgen_add_to_stack_pointer,hl=F.__wbindgen_malloc,kl=F.__wbindgen_realloc,El=F.__wbindgen_free,Sl=F.__wbindgen_exn_store,Cl=Object.freeze(Object.defineProperty({__proto__:null,__wbg_config_free:Vl,__wbindgen_add_to_stack_pointer:wl,__wbindgen_exn_store:Sl,__wbindgen_free:El,__wbindgen_malloc:hl,__wbindgen_realloc:kl,generate_batch_json:yl,generate_batch_yaml:vl,memory:gl,parse_config:bl},Symbol.toStringTag,{value:"Module"}));Ae(Cl);const de=Se("appStatus",()=>{const l=L(),e=A("editing"),n=A(""),o=A([]),u=A(""),r=A(null);it(()=>{try{r.value=Fe(JSON.stringify(l.config)),e.value="editing"}catch(d){r.value=null,u.value=d.toString(),e.value="edit-err"}});function f(){e.value="editing"}function s(){if(r.value!==null){o.value=[],e.value="running";try{const d=Oe(r.value,n.value);o.value=JSON.parse(d),c()}catch(d){u.value=d.toString(),e.value="exec-err"}}}function c(){e.value="result"}return{currentStep:e,selectedPresetName:n,generationResult:o,errorMsg:u,configParsed:r,edit:f,run:s,showResult:c}}),z=Symbol("keyForXObjArray");function Ve(l){return l[z]||(l[z]=Symbol()),l[z]}const Ul={style:{"margin-bottom":"8px"}},xl={style:{"margin-bottom":"8px"}},Pl=R({__name:"ConfigChildItemList",props:H({defaultNewItemValue:{},dialogTitle:{default:""},dialogPrompt:{default:""},dialogErrorText:{default:""},disableScroll:{type:Boolean,default:!0},retrieveKey:{type:Function,default:(l,e)=>e}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Q(l,"modelValue"),n=l,o=A(!1),u=A(""),r=Y(()=>!(u.value in e.value)&&u.value.length>0);function f(){Array.isArray(e.value)?e.value.push(n.defaultNewItemValue()):(e.value[u.value]=n.defaultNewItemValue(),u.value="",o.value=!1)}function s(){Array.isArray(e.value)?f():o.value=!0}function c(g){Array.isArray(e.value)?e.value.splice(g,1):delete e.value[g]}function d(g){if(Array.isArray(e.value)){const p=n.defaultNewItemValue();typeof e.value[g][z]<"u"&&(p[z]=e.value[g][z]),e.value[g]=p}else e.value[g]=n.defaultNewItemValue()}function v(g){if(Array.isArray(e.value)){let p=e.value.splice(g,1);e.value.splice(g-1,0,...p)}}function U(g){if(Array.isArray(e.value)){let p=e.value.splice(g,1);e.value.splice(g+1,0,...p)}}return(g,p)=>{const P=i("ElIcon"),X=i("ElButton"),G=i("ElForm"),j=i("ElCollapseItem"),I=i("ElCollapse"),V=i("ElScrollbar"),b=i("ElInput"),N=i("ElText"),Ee=i("el-button"),nt=i("ElDialog");return _(),S(C,null,[E("div",{class:ct({"disable-scroll":n.disableScroll}),style:{display:"flex","flex-direction":"column"}},[E("div",Ul,[t(X,{onClick:p[0]||(p[0]=O=>s())},{default:a(()=>[t(P,null,{default:a(()=>[t(m(dt))]),_:1})]),_:1})]),t(V,{style:{"padding-right":"10px"}},{default:a(()=>[t(I,null,{default:a(()=>[(_(!0),S(C,null,q(e.value,(O,M)=>(_(),y(j,{key:g.retrieveKey(O,M)},{title:a(()=>[Ce(g.$slots,"itemTitle",{item:O,key:M},()=>[h(T(M),1)],!0),Array.isArray(e.value)?(_(),S(C,{key:0},[M!==0?(_(),y(P,{key:0,class:"icon",onClick:D(fe=>v(M),["stop"])},{default:a(()=>[t(m(Ue))]),_:2},1032,["onClick"])):B("",!0),M<e.value.length-1?(_(),y(P,{key:1,class:"icon",onClick:D(fe=>U(M),["stop"])},{default:a(()=>[t(m(xe))]),_:2},1032,["onClick"])):B("",!0)],64)):B("",!0),t(P,{class:"icon",onClick:D(fe=>d(M),["stop"])},{default:a(()=>[t(m(st))]),_:2},1032,["onClick"]),t(P,{class:"icon",onClick:D(fe=>c(M),["stop"])},{default:a(()=>[t(m(_e))]),_:2},1032,["onClick"])]),default:a(()=>[t(G,{"label-position":"top"},{default:a(()=>[Ce(g.$slots,"default",{item:O,key:M},void 0,!0)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})],2),t(nt,{modelValue:o.value,"onUpdate:modelValue":p[4]||(p[4]=O=>o.value=O),title:n.dialogTitle},{footer:a(()=>[E("span",null,[t(Ee,{onClick:p[2]||(p[2]=O=>o.value=!1)},{default:a(()=>[h("\u53D6\u6D88")]),_:1}),t(Ee,{type:"primary",disabled:!r.value,onClick:p[3]||(p[3]=O=>f())},{default:a(()=>[h(" \u6DFB\u52A0 ")]),_:1},8,["disabled"])])]),default:a(()=>[E("div",xl,T(n.dialogPrompt),1),t(b,{modelValue:u.value,"onUpdate:modelValue":p[1]||(p[1]=O=>u.value=O)},null,8,["modelValue"]),pe(t(N,{type:"danger"},{default:a(()=>[h(T(n.dialogErrorText),1)]),_:1},512),[[ge,!r.value]])]),_:1},8,["modelValue","title"])],64)}}}),we=(l,e)=>{const n=l.__vccOpts||l;for(const[o,u]of e)n[o]=u;return n},J=we(Pl,[["__scopeId","data-v-613da4c1"]]),Il=R({__name:"PatternsPane",setup(l){const e=L();return(n,o)=>{const u=i("ElInputNumber"),r=i("ElFormItem"),f=i("ElInput");return _(),y(J,{modelValue:m(e).config.patterns,"onUpdate:modelValue":o[0]||(o[0]=s=>m(e).config.patterns=s),"default-new-item-value":()=>({length:1}),"dialog-title":"\u6DFB\u52A0\u8282\u594F\u578B","dialog-prompt":"\u8BF7\u4E3A\u8282\u594F\u578B\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u8282\u594F\u578B\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u8282\u594F\u578B\u91CD\u590D\u3002"},{default:a(({item:s})=>[t(r,{label:"\u957F\u5EA6length",required:""},{default:a(()=>[t(u,{modelValue:s.length,"onUpdate:modelValue":c=>s.length=c},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(r,{label:"\u663E\u793A\u540D\u79F0displayName"},{default:a(()=>[t(f,{modelValue:s.displayName,"onUpdate:modelValue":c=>s.displayName=c},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(r,{label:"ABC\u683C\u5F0F\u663E\u793A\u5185\u5BB9displayAbc (\u9ED8\u8BA4L: 1/16)"},{default:a(()=>[t(f,{modelValue:s.displayAbc,"onUpdate:modelValue":c=>s.displayAbc=c},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1},8,["modelValue"])}}}),Rl=R({__name:"CategoriesPane",setup(l){const e=L();return(n,o)=>{const u=i("ElOption"),r=i("ElSelect"),f=i("ElFormItem");return _(),y(J,{modelValue:m(e).config.categories,"onUpdate:modelValue":o[0]||(o[0]=s=>m(e).config.categories=s),"default-new-item-value":()=>[],"dialog-title":"\u6DFB\u52A0\u7C7B\u522B","dialog-prompt":"\u8BF7\u4E3A\u8282\u594F\u578B\u7C7B\u522B\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u7C7B\u522B\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u7C7B\u522B\u540D\u91CD\u590D\u3002"},{default:a(({key:s})=>[t(f,{required:""},{default:a(()=>[t(r,{modelValue:m(e).config.categories[s],"onUpdate:modelValue":c=>m(e).config.categories[s]=c,multiple:"",filterable:""},{default:a(()=>[(_(!0),S(C,null,q(m(e).config.patterns,(c,d)=>(_(),y(u,{key:d,label:d,value:d},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1},8,["modelValue"])}}}),Al=R({__name:"FillEachBlankActionView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Q(l,"modelValue"),n=l;return(o,u)=>{const r=i("ElOption"),f=i("ElSelect"),s=i("ElFormItem"),c=i("ElCard");return e.value?(_(),S(C,{key:0},[t(s,{label:"\u533A\u57DF\u8303\u56F4in",required:""},{default:a(()=>[t(f,{modelValue:e.value.in,"onUpdate:modelValue":u[0]||(u[0]=d=>e.value.in=d),multiple:"",filterable:""},{default:a(()=>[(_(!0),S(C,null,q(n.parentRuleSet.layout,(d,v)=>(_(),y(r,{key:v,label:v,value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u8C03\u7528\u52A8\u4F5Cwith",required:""},{default:a(()=>[t(c,{shadow:"never",style:{width:"100%"},class:"card-remove-last-margin-bottom"},{default:a(()=>[t(se,{modelValue:e.value.with,"onUpdate:modelValue":u[1]||(u[1]=d=>e.value.with=d),mode:"action","parent-rule-set":o.parentRuleSet},null,8,["modelValue","parent-rule-set"])]),_:1})]),_:1})],64)):B("",!0)}}}),Bl=R({__name:"ChooseARandomPositionActionView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Q(l,"modelValue"),n=l;return(o,u)=>{const r=i("ElOption"),f=i("ElSelect"),s=i("ElFormItem"),c=i("ElInputNumber"),d=i("ElCard");return e.value?(_(),S(C,{key:0},[t(s,{label:"\u533A\u57DF\u8303\u56F4in",required:""},{default:a(()=>[t(f,{modelValue:e.value.in,"onUpdate:modelValue":u[0]||(u[0]=v=>e.value.in=v),multiple:"",filterable:""},{default:a(()=>[(_(!0),S(C,null,q(n.parentRuleSet.layout,(v,U)=>(_(),y(r,{key:U,label:U,value:U},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u957F\u5EA6length",required:""},{default:a(()=>[t(c,{modelValue:e.value.length,"onUpdate:modelValue":u[1]||(u[1]=v=>e.value.length=v)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u8C03\u7528\u52A8\u4F5Cdo",required:""},{default:a(()=>[t(d,{shadow:"never",style:{width:"100%"},class:"card-remove-last-margin-bottom"},{default:a(()=>[t(se,{modelValue:e.value.do,"onUpdate:modelValue":u[2]||(u[2]=v=>e.value.do=v),mode:"action","parent-rule-set":o.parentRuleSet},null,8,["modelValue","parent-rule-set"])]),_:1})]),_:1})],64)):B("",!0)}}}),Nl=R({__name:"RandomPickActionView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=L(),n=Q(l,"modelValue"),o=l;return(u,r)=>{const f=i("ElOption"),s=i("ElSelect"),c=i("ElButton"),d=i("ElFormItem"),v=i("ElInputNumber"),U=i("ElCard");return n.value?(_(),S(C,{key:0},[t(d,{label:"\u4ECE\u5206\u7C7B\u4E2D\u9009\u53D6\u8282\u594F\u578BfromCategories"},{default:a(()=>[n.value.fromCategories?(_(),y(s,{key:0,modelValue:n.value.fromCategories,"onUpdate:modelValue":r[0]||(r[0]=g=>n.value.fromCategories=g),multiple:"",filterable:""},{default:a(()=>[(_(!0),S(C,null,q(m(e).config.categories,(g,p)=>(_(),y(f,{key:p,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(_(),y(c,{key:1,onClick:r[1]||(r[1]=g=>n.value.fromCategories=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1}),t(d,{label:"\u4ECE\u6B64\u5217\u8868\u4E2D\u9009\u53D6\u8282\u594F\u578BfromList"},{default:a(()=>[n.value.fromList?(_(),y(s,{key:0,modelValue:n.value.fromList,"onUpdate:modelValue":r[2]||(r[2]=g=>n.value.fromList=g),multiple:"",filterable:""},{default:a(()=>[(_(!0),S(C,null,q(m(e).config.patterns,(g,p)=>(_(),y(f,{key:p,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(_(),y(c,{key:1,onClick:r[3]||(r[3]=g=>n.value.fromList=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1}),t(d,{label:"\u6700\u5927\u957F\u5EA6maxLength"},{default:a(()=>[t(v,{modelValue:n.value.maxLength,"onUpdate:modelValue":r[4]||(r[4]=g=>n.value.maxLength=g)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u5728\u6B64\u5E03\u5C40\u533A\u57DF\u5F00\u5934\u653E\u7F6Ein"},{default:a(()=>[t(s,{modelValue:n.value.in,"onUpdate:modelValue":r[5]||(r[5]=g=>n.value.in=g),filterable:""},{default:a(()=>[(_(!0),S(C,null,q(o.parentRuleSet.layout,(g,p)=>(_(),y(f,{key:p,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"\u5728\u6307\u5B9A\u8282\u62CD\u4F4D\u7F6E\u653E\u7F6E(0\u8D77\u8BA1\u6570)at"},{default:a(()=>[t(v,{modelValue:n.value.at,"onUpdate:modelValue":r[6]||(r[6]=g=>n.value.at=g)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u7EA6\u675Fconstraints"},{default:a(()=>[n.value.constraints?(_(),y(U,{key:0,shadow:"never",style:{width:"100%"}},{default:a(()=>[t(J,{modelValue:n.value.constraints,"onUpdate:modelValue":r[7]||(r[7]=g=>n.value.constraints=g),"default-new-item-value":()=>({type:"Blank"}),"disable-scroll":!1,"retrieve-key":m(Ve)},{itemTitle:a(({item:g,key:p})=>[h(T(p)+" : "+T(g.type),1)]),default:a(({key:g})=>[t(se,{modelValue:n.value.constraints[g],"onUpdate:modelValue":p=>n.value.constraints[g]=p,mode:"constraint","parent-rule-set":o.parentRuleSet},null,8,["modelValue","onUpdate:modelValue","parent-rule-set"])]),_:1},8,["modelValue","retrieve-key"])]),_:1})):(_(),y(c,{key:1,onClick:r[8]||(r[8]=g=>n.value.constraints=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1})],64)):B("",!0)}}}),ql=R({__name:"UsageCountGroupConstraintView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Q(l,"modelValue");return(n,o)=>{const u=i("ElInput"),r=i("ElFormItem");return e.value?(_(),y(r,{key:0,label:"\u540D\u79F0name",required:""},{default:a(()=>[t(u,{modelValue:e.value.name,"onUpdate:modelValue":o[0]||(o[0]=f=>e.value.name=f)},null,8,["modelValue"])]),_:1})):B("",!0)}}}),Ll={style:{"margin-top":"4px",display:"flex","align-items":"center"}},Fl=R({__name:"RejectPatternWithUsageCountConstraintView",props:H({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Q(l,"modelValue"),n=Y(()=>e.value.value==="max"||e.value.value==="maxAutoBalance"||typeof e.value.value=="number");return(o,u)=>{const r=i("ElRadio"),f=i("ElRadioGroup"),s=i("ElFormItem"),c=i("ElInput"),d=i("ElOption"),v=i("ElSelect"),U=i("ElText"),g=i("ElButton");return e.value?(_(),S(C,{key:0},[t(s,{label:"\u5C42\u7EA7level",required:""},{default:a(()=>[t(f,{modelValue:e.value.level,"onUpdate:modelValue":u[0]||(u[0]=p=>e.value.level=p)},{default:a(()=>[t(r,{value:"batch"},{default:a(()=>[h("\u6279\u6B21batch")]),_:1}),t(r,{value:"piece"},{default:a(()=>[h("\u6761\u76EEpiece")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u8BA1\u6570\u7EC4\u540D\u79F0groupName",required:""},{default:a(()=>[t(c,{modelValue:e.value.groupName,"onUpdate:modelValue":u[1]||(u[1]=p=>e.value.groupName=p)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u6BD4\u8F83\u8FD0\u7B97\u7B26comparator",required:""},{default:a(()=>[t(v,{modelValue:e.value.comparator,"onUpdate:modelValue":u[2]||(u[2]=p=>e.value.comparator=p)},{default:a(()=>[(_(),S(C,null,q(["<","<=","==",">=",">","!="],p=>t(d,{key:p,label:p,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6BD4\u8F83\u503Cvalue",required:""},{default:a(()=>[t(c,{modelValue:e.value.value,"onUpdate:modelValue":u[3]||(u[3]=p=>e.value.value=p),modelModifiers:{number:!0}},null,8,["modelValue"]),E("div",Ll,[t(U,{size:"small"},{default:a(()=>[h("\u7279\u6B8A\u503C\uFF1A")]),_:1}),t(g,{size:"small",onClick:u[4]||(u[4]=p=>e.value.value="max")},{default:a(()=>[h("max")]),_:1}),t(g,{size:"small",onClick:u[5]||(u[5]=p=>e.value.value="maxAutoBalance")},{default:a(()=>[h("maxAutoBalance")]),_:1})]),pe(t(U,{type:"danger"},{default:a(()=>[h("value\u503C\u65E0\u6548\uFF0C\u5E94\u4E3A\u6570\u5B57\u6216\u201Cmax\u201D\uFF0C\u201CmaxAutoBalance\u201D")]),_:1},512),[[ge,!n.value]])]),_:1})],64)):B("",!0)}}}),{allActions:jl,allConstraints:Ol,optionsRegistry:he}=function(){const l={Blank:{defaults:()=>({type:"Blank"}),view:{}},FillEachBlank:{defaults:()=>({type:"FillEachBlank",in:[],with:{type:"Blank"}}),view:Al},ChooseARandomPosition:{defaults:()=>({type:"ChooseARandomPosition",in:[],length:1,do:{type:"Blank"}}),view:Bl},RandomPick:{defaults:()=>({type:"RandomPick"}),view:Nl}},e={Blank:{defaults:()=>({type:"Blank"}),view:{}},UsageCountGroup:{defaults:()=>({type:"UsageCountGroup",name:""}),view:ql},RejectPatternWithUsageCount:{defaults:()=>({type:"RejectPatternWithUsageCount",level:"piece",groupName:"",comparator:">=",value:"maxAutoBalance"}),view:Fl}};return{allActions:Object.keys(l),allConstraints:Object.keys(e),optionsRegistry:{...l,...e}}}(),se=R({__name:"XObjEditor",props:H({mode:{},parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Q(l,"modelValue"),n=Y({get:()=>e.value.type,set:o=>{e.value={...he[o].defaults(),[z]:e.value[z]}}});return(o,u)=>{const r=i("ElOption"),f=i("ElSelect"),s=i("ElFormItem");return _(),S(C,null,[t(s,{label:"\u7C7B\u578Btype",required:""},{default:a(()=>[t(f,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),filterable:""},{default:a(()=>[(_(!0),S(C,null,q(o.mode==="action"?m(jl):m(Ol),c=>(_(),y(r,{key:c,value:c},null,8,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.value.type!=="Blank"?(_(),y(Pe(m(he)[e.value.type].view),{key:0,modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=c=>e.value=c),"parent-rule-set":o.parentRuleSet},null,8,["modelValue","parent-rule-set"])):B("",!0)],64)}}}),Ml=R({__name:"RuleSetsPane",setup(l){const e=L(),n=A(0),o=A("");return(u,r)=>{const f=i("ElInputNumber"),s=i("ElFormItem"),c=i("ElInput"),d=i("el-option"),v=i("el-select"),U=i("ElButton"),g=i("ElForm"),p=i("el-table-column"),P=i("ElIcon"),X=i("ElTableColumn"),G=i("el-table"),j=i("ElCard");return _(),y(J,{modelValue:m(e).config.ruleSets,"onUpdate:modelValue":r[3]||(r[3]=I=>m(e).config.ruleSets=I),"default-new-item-value":()=>({scoreInsertions:{0:"[M: 4/4]"},bpm:72,pieceLength:8,layout:{},actions:[]}),"dialog-title":"\u6DFB\u52A0\u89C4\u5219\u96C6","dialog-prompt":"\u8BF7\u4E3A\u89C4\u5219\u96C6\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u89C4\u5219\u96C6\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u89C4\u5219\u96C6\u91CD\u590D\u3002"},{default:a(({item:I,key:V})=>[t(s,{label:"\u4E50\u8C31\u63D2\u5165\u6587\u672CscoreInsertions",required:""},{default:a(()=>[t(g,{inline:""},{default:a(()=>[t(s,null,{default:a(()=>[t(f,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=b=>n.value=b),placeholder:"\u8282\u62CD\u5E8F\u53F7\uFF08\u96F6\u8D77\uFF09beatIndex"},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(c,{modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=b=>o.value=b),placeholder:"\u5185\u5BB9content"},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(v,{modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=b=>o.value=b),placeholder:"\u5185\u5BB9content",filterable:"","allow-create":"",class:"no-content-select"},{default:a(()=>[t(d,{value:"[M: 4/4]",label:"[M: 4/4]\uFF08\u62CD\u53F7\u66F4\u6362\uFF09"}),t(d,{value:"|",label:"|\uFF08\u5C0F\u8282\u7EBF\uFF09"})]),_:1},8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(U,{onClick:b=>I.scoreInsertions[n.value]=o.value},{default:a(()=>[h("\u6DFB\u52A0")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(G,{data:Object.entries(I.scoreInsertions)},{default:a(()=>[t(p,{prop:"0",label:"\u8282\u62CD\u5E8F\u53F7\uFF08\u96F6\u8D77\uFF09beatIndex"}),t(p,{prop:"1",label:"\u5185\u5BB9content"}),t(X,{label:"\u64CD\u4F5C",width:"55px"},{default:a(b=>[t(U,{link:"",onClick:D(N=>delete I.scoreInsertions[b.row[0]],["prevent"])},{default:a(()=>[t(P,null,{default:a(()=>[t(m(_e))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])]),_:2},1024),t(s,{label:"\u901F\u5EA6bpm",required:""},{default:a(()=>[t(f,{modelValue:I.bpm,"onUpdate:modelValue":b=>I.bpm=b},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u6BCF\u6761\u957F\u5EA6pieceLength",required:""},{default:a(()=>[t(f,{modelValue:I.pieceLength,"onUpdate:modelValue":b=>I.pieceLength=b},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u5E03\u5C40layout",required:""},{default:a(()=>[t(j,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(J,{modelValue:m(e).config.ruleSets[V].layout,"onUpdate:modelValue":b=>m(e).config.ruleSets[V].layout=b,"default-new-item-value":()=>({start:0,end:I.pieceLength}),"dialog-title":"\u6DFB\u52A0\u5E03\u5C40\u533A\u57DF","dialog-prompt":"\u8BF7\u4E3A\u5E03\u5C40\u533A\u57DF\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u5E03\u5C40\u533A\u57DF\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u5E03\u5C40\u533A\u57DF\u91CD\u590D\u3002","disable-scroll":!1},{default:a(({item:b})=>[t(s,{label:"\u8D77\u70B9(\u542B)start",required:""},{default:a(()=>[t(f,{modelValue:b.start,"onUpdate:modelValue":N=>b.start=N},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u7EC8\u70B9(\u4E0D\u542B)end",required:""},{default:a(()=>[t(f,{modelValue:b.end,"onUpdate:modelValue":N=>b.end=N},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","default-new-item-value"])]),_:2},1024)]),_:2},1024),t(s,{label:"\u52A8\u4F5Cactions",required:""},{default:a(()=>[t(j,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(J,{modelValue:m(e).config.ruleSets[V].actions,"onUpdate:modelValue":b=>m(e).config.ruleSets[V].actions=b,"default-new-item-value":()=>({type:"Blank"}),"disable-scroll":!1,"retrieve-key":m(Ve)},{itemTitle:a(({item:b,key:N})=>[h(T(N)+" : "+T(b.type),1)]),default:a(({key:b})=>[t(se,{modelValue:m(e).config.ruleSets[V].actions[b],"onUpdate:modelValue":N=>m(e).config.ruleSets[V].actions[b]=N,mode:"action","parent-rule-set":m(e).config.ruleSets[V]},null,8,["modelValue","onUpdate:modelValue","parent-rule-set"])]),_:2},1032,["modelValue","onUpdate:modelValue","retrieve-key"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])}}}),Tl={style:{display:"flex","justify-content":"flex-end"}},$l=R({__name:"BatchPresetsPane",setup(l){const e=L(),n=A(""),o=A(1);function u(c){e.config.batchPresets&&e.config.batchPresets[c].push({ruleSetName:n.value,amount:o.value})}function r(c,d){e.config.batchPresets&&e.config.batchPresets[c].splice(d,1)}function f(c,d){if(e.config.batchPresets){let v=e.config.batchPresets[c].splice(d,1);e.config.batchPresets[c].splice(d-1,0,...v)}}function s(c,d){if(e.config.batchPresets){let v=e.config.batchPresets[c].splice(d,1);e.config.batchPresets[c].splice(d+1,0,...v)}}return(c,d)=>{const v=i("ElOption"),U=i("ElSelect"),g=i("ElFormItem"),p=i("ElInputNumber"),P=i("ElButton"),X=i("ElForm"),G=i("ElTableColumn"),j=i("ElIcon"),I=i("ElTable");return m(e).config.batchPresets?(_(),y(J,{key:0,modelValue:m(e).config.batchPresets,"onUpdate:modelValue":d[2]||(d[2]=V=>m(e).config.batchPresets=V),"default-new-item-value":()=>[],"dialog-title":"\u6DFB\u52A0\u6279\u91CF\u751F\u6210\u9884\u8BBE","dialog-prompt":"\u8BF7\u4E3A\u6279\u91CF\u751F\u6210\u9884\u8BBE\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u9884\u8BBE\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u6279\u91CF\u751F\u6210\u9884\u8BBE\u91CD\u590D\u3002"},{default:a(({key:V})=>[t(X,{inline:"",style:{display:"flex"}},{default:a(()=>[t(g,{style:{width:"calc((100% - 110px) * 0.5)"}},{default:a(()=>[t(U,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=b=>n.value=b),placeholder:"\u89C4\u5219\u96C6\u540D\u79F0ruleSetName",filterable:""},{default:a(()=>[(_(!0),S(C,null,q(Object.keys(m(e).config.ruleSets),b=>(_(),y(v,{key:b,label:b,value:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(g,null,{default:a(()=>[t(p,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=b=>o.value=b),placeholder:"\u6570\u91CFamount"},null,8,["modelValue"])]),_:1}),t(g,null,{default:a(()=>[t(P,{onClick:b=>u(V)},{default:a(()=>[h("\u6DFB\u52A0")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(I,{data:m(e).config.batchPresets[V]},{default:a(()=>[t(G,{prop:"ruleSetName",label:"\u89C4\u5219\u96C6\u540D\u79F0ruleSetName"}),t(G,{prop:"amount",label:"\u6570\u91CFamount"}),t(G,{label:"\u64CD\u4F5C",width:"110px"},{default:a(b=>[E("div",Tl,[b.$index>0?(_(),y(P,{key:0,link:"",onClick:D(N=>f(V,b.$index),["stop"])},{default:a(()=>[t(j,null,{default:a(()=>[t(m(Ue))]),_:1})]),_:2},1032,["onClick"])):B("",!0),b.$index<m(e).config.batchPresets[V].length-1?(_(),y(P,{key:1,link:"",onClick:D(N=>s(V,b.$index),["stop"])},{default:a(()=>[t(j,null,{default:a(()=>[t(m(xe))]),_:1})]),_:2},1032,["onClick"])):B("",!0),t(P,{link:"",onClick:D(N=>r(V,b.$index),["prevent"])},{default:a(()=>[t(j,null,{default:a(()=>[t(m(_e))]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["data"])]),_:1},8,["modelValue"])):(_(),y(P,{key:1,onClick:d[3]||(d[3]=V=>m(e).config.batchPresets={})},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))}}}),Wl=R({__name:"SettingsPane",setup(l){const e=L();return ft(()=>{var n;return(n=e.config.settings)==null?void 0:n.autoSeed},n=>{n&&delete e.config.settings.fixedSeed}),(n,o)=>{const u=i("ElSwitch"),r=i("ElFormItem"),f=i("ElInput"),s=i("ElForm"),c=i("ElButton");return m(e).config.settings?(_(),y(s,{key:0,"label-position":"top"},{default:a(()=>[t(r,{label:"\u81EA\u52A8\u8BBE\u7F6E\u968F\u673A\u6570\u79CD\u5B50autoSeed"},{default:a(()=>[t(u,{modelValue:m(e).config.settings.autoSeed,"onUpdate:modelValue":o[0]||(o[0]=d=>m(e).config.settings.autoSeed=d)},null,8,["modelValue"])]),_:1}),pe(t(r,{label:"\u56FA\u5B9A\u79CD\u5B50\u6570\u503CfixedSeed"},{default:a(()=>[t(f,{modelValue:m(e).config.settings.fixedSeed,"onUpdate:modelValue":o[1]||(o[1]=d=>m(e).config.settings.fixedSeed=d),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},512),[[ge,!m(e).config.settings.autoSeed]])]),_:1})):(_(),y(c,{key:1,onClick:o[2]||(o[2]=d=>m(e).config.settings={})},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))}}}),ke=R({__name:"EditorPage",setup(l){const e=L(),n=de();return(o,u)=>{const r=i("el-text"),f=i("ElTabPane"),s=i("ElTabs"),c=i("ElCol"),d=i("ElScrollbar"),v=i("ElRow");return _(),y(v,{class:"disable-scroll"},{default:a(()=>[t(c,{span:16,class:"disable-scroll"},{default:a(()=>[m(n).currentStep==="edit-err"?(_(),y(r,{key:0,type:"danger"},{default:a(()=>[h(" \u9519\u8BEF\uFF1A"+T(m(n).errorMsg),1)]),_:1})):B("",!0),t(s,{"tab-position":"left",class:"disable-scroll"},{default:a(()=>[t(f,{label:"\u8282\u594F\u578B\u5217\u8868patterns",class:"disable-scroll"},{default:a(()=>[t(Il)]),_:1}),t(f,{label:"\u8282\u594F\u578B\u5206\u7C7Bcategories",class:"disable-scroll"},{default:a(()=>[t(Rl)]),_:1}),t(f,{label:"\u89C4\u5219\u96C6ruleSets",class:"disable-scroll"},{default:a(()=>[t(Ml)]),_:1}),t(f,{label:"\u6279\u91CF\u751F\u6210\u9884\u8BBEbatchPresets",class:"disable-scroll"},{default:a(()=>[t($l)]),_:1}),t(f,{label:"\u751F\u6210\u5668\u8BBE\u7F6Esettings",class:"disable-scroll"},{default:a(()=>[t(Wl)]),_:1})]),_:1})]),_:1}),t(c,{span:8,class:"disable-scroll"},{default:a(()=>[t(d,null,{default:a(()=>[E("code",null,[E("pre",null,T(m(me).stringify(m(e).config)),1)])]),_:1})]),_:1})]),_:1})}}});function Gl(l,e){return l.map((n,o)=>{const u=e.ruleSets[n.ruleSetName];return`
X: ${o}
V: T1 name=${o+1} stem=up
K: perc stafflines=1 middle=A
L: 1/16
Q: ${u.bpm}
${zl(n,e,u)} |]
`}).join("")}function zl(l,e,n){let o=0,u=null;return l.beats.map((r,f)=>{const s=e.patterns[r.patternName];let c="";if(f in n.scoreInsertions){const d=n.scoreInsertions[f],v=d.match(/^\[M: ?(\d+?)\/(\d+?)]$/);v!==null?(u={upper:Number.parseInt(v[1]),lower:Number.parseInt(v[2])},o!==0&&(c+="| "),c+=d,o=0):d==="|"?(c+="|",o=0):c+=d}return u&&o%u.upper===0&&o>0&&!c.includes("|")&&(c="| "+c),o++,`${c} `+(r.offset===0?s.displayAbc:"")}).join(" ")}const Dl=R({__name:"AbcNotationRenderer",setup(l){const e=de(),n=L(),o=A(null);function u(){if(o.value){const r=e.generationResult.map(()=>document.createElement("div"));pt.renderAbc(r,Gl(e.generationResult,n.config)),o.value.replaceChildren(...r)}}return mt(()=>{_t(()=>{u()})}),(r,f)=>(_(),S("div",{ref_key:"abcContainer",ref:o},null,512))}}),Kl=R({__name:"ResultPage",setup(l){const e=de();return(n,o)=>{const u=i("el-text"),r=i("ElScrollbar");return _(),y(r,null,{default:a(()=>[m(e).currentStep==="exec-err"?(_(),y(u,{key:0,type:"danger"},{default:a(()=>[h(" \u9519\u8BEF\uFF1A"+T(m(e).errorMsg),1)]),_:1})):(_(),y(Dl,{key:1}))]),_:1})}}}),Z=l=>(bt("data-v-5ac67947"),l=l(),vt(),l),Jl={style:{"margin-left":"50px","margin-right":"50px",flex:"1"}},Xl={style:{"margin-left":"auto"}},Hl=Z(()=>E("h1",null,"Rhythmologist",-1)),Ql=Z(()=>E("p",null,"Copyright \xA9 2024 Liu Chibing. All rights reserved.",-1)),Yl=Z(()=>E("h2",null,"\u9E23\u8C22",-1)),Zl=Z(()=>E("p",null,"\u738B\u6654 \u6559\u6388",-1)),et=Z(()=>E("h3",null,"\u5F00\u6E90\u4EE3\u7801",-1)),lt=Z(()=>E("ul",null,[E("li",null,"Vue"),E("li",null,"Element Plus"),E("li",null,"TypeScript"),E("li",null,"Rust"),E("li",null,"Electron")],-1)),tt=R({__name:"App",setup(l){const e=de(),n=L(),o=Y(()=>{switch(e.currentStep){case"editing":case"edit-err":return 1;case"running":case"exec-err":case"result":return 2;default:return 0}}),u=Y(()=>{switch(e.currentStep){case"editing":return"process";case"edit-err":return"error";case"running":case"exec-err":case"result":return"success";default:return"wait"}}),r=Y(()=>{switch(e.currentStep){case"editing":case"edit-err":return"wait";case"running":return"process";case"exec-err":return"error";case"result":return"success";default:return"wait"}}),f=Y(()=>{switch(e.currentStep){case"editing":case"edit-err":return ke;case"running":case"exec-err":case"result":return Kl;default:return ke}}),s=A(!1);return(c,d)=>{const v=i("ElStep"),U=i("ElSteps"),g=i("ElOption"),p=i("ElSelect"),P=i("ElButton"),X=i("ElHeader"),G=i("ElMain"),j=i("ElContainer"),I=i("ElDialog");return _(),S(C,null,[t(j,{class:"disable-scroll"},{default:a(()=>[t(X,null,{default:a(()=>[E("h1",{onClick:d[0]||(d[0]=V=>s.value=!0)},"Rhythmologist"),E("div",Jl,[t(U,{simple:"",active:o.value},{default:a(()=>[t(v,{title:"\u914D\u7F6E\u7F16\u8F91",status:u.value},null,8,["status"]),t(v,{title:"\u8FD0\u884C\u7ED3\u679C",status:r.value},null,8,["status"])]),_:1},8,["active"])]),E("div",Xl,[m(n).config.batchPresets?(_(),y(p,{key:0,modelValue:m(e).selectedPresetName,"onUpdate:modelValue":d[1]||(d[1]=V=>m(e).selectedPresetName=V),placeholder:"\u9009\u62E9\u751F\u6210\u9884\u8BBE",style:{width:"150px","margin-right":"12px"}},{default:a(()=>[(_(!0),S(C,null,q(Object.keys(m(n).config.batchPresets),V=>(_(),y(g,{key:V,label:V,value:V},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):B("",!0),t(P,{disabled:!m(n).config.batchPresets||!(m(e).selectedPresetName in m(n).config.batchPresets),onClick:d[2]||(d[2]=V=>m(e).run())},{default:a(()=>[h(" \u8FD0\u884C ")]),_:1},8,["disabled"]),B("",!0),o.value===1?(_(),S(C,{key:2},[t(P,{onClick:d[3]||(d[3]=V=>m(n).load())},{default:a(()=>[h("\u6253\u5F00")]),_:1}),t(P,{onClick:d[4]||(d[4]=V=>m(n).save())},{default:a(()=>[h("\u4FDD\u5B58")]),_:1})],64)):(_(),y(P,{key:3,onClick:d[5]||(d[5]=V=>m(e).edit())},{default:a(()=>[h("\u8FD4\u56DE\u7F16\u8F91")]),_:1}))])]),_:1}),t(G,{class:"disable-scroll"},{default:a(()=>[(_(),y(gt,null,[(_(),y(Pe(f.value)))],1024))]),_:1})]),_:1}),t(I,{modelValue:s.value,"onUpdate:modelValue":d[6]||(d[6]=V=>s.value=V),title:"\u5173\u4E8E",class:"about-dialog"},{default:a(()=>[Hl,Ql,Yl,Zl,et,lt]),_:1},8,["modelValue"])],64)}}}),at=we(tt,[["__scopeId","data-v-5ac67947"]]),ce=yt(at);ce.use(Vt()),ce.use(wt),ce.mount("#app")});
