import{d as je,r as j,u as ft,Y as me,E as mt,h as _t,w as pt,a as I,m as J,b as Y,c as K,e as r,o as g,f as E,g as S,i as t,j as a,k as p,p as bt,l as _e,F as U,n as N,q as v,s as h,t as q,v as G,x as Le,y as B,z as Be,A as gt,B as pe,C as yt,D as be,G as ge,H as vt,I as ht,J as wt,K as Vt,L as Ne,M as kt,N as Et,O as St,P as xt,Q as Ct,R as Ut,S as At,__tla as Pt}from"./vendor-C1VrvuFj.js";Promise.all([(()=>{try{return Pt}catch{}})()]).then(async()=>{(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(u){if(u.ep)return;u.ep=!0;const o=e(u);fetch(u.href,o)}})();function ye(l,e){const n=new File([l],e),u=URL.createObjectURL(n),o=document.createElement("a");o.href=u,o.download=e,o.click(),setTimeout(()=>{URL.revokeObjectURL(u),o.remove()},100)}const $=je("config",()=>{const l=j({patterns:{},categories:{},ruleSets:{}}),{open:e,reset:n,onChange:u}=ft({accept:".yaml,.yml,text/vnd.yaml"});u(d=>{var f;d&&((f=d.item(0))==null||f.text().then(s=>{l.value=me.parse(s)}).catch(s=>{mt.alert(_t("pre",{class:"err-msg-box",style:{whiteSpace:"pre-wrap"}},`\u6253\u5F00\u6587\u4EF6\u65F6\u9047\u5230\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u662F\u5426\u6B63\u786E\u3002
\u9519\u8BEF\u4FE1\u606F\uFF1A
${s}`),"\u9519\u8BEF",{type:"error"})}).finally(()=>n()))});function o(){e()}function i(){const d=me.stringify(l.value);ye(d,"config.yaml")}return{config:l,load:o,save:i}});function ve(l,e,n=!1){return l.map((u,o)=>{const i=e.ruleSets[u.ruleSetName];return`
X: ${o}
V: T1 name=${o+1} stem=up
K: none ${n?"":"perc stafflines=1 middle=A"}
L: 1/16
${qe(u,e,i)} |]
`}).join("")}function qe(l,e,n){let u=0,o=null;return l.beats.map((i,d)=>{const f=e.patterns[i.patternName];let s="";if(d in n.scoreInsertions){const m=n.scoreInsertions[d],c=m.match(/\[M: ?(\d+?)\/(\d+?)]/);c!==null?(o={upper:Number.parseInt(c[1]),lower:Number.parseInt(c[2])},u!==0&&!m.includes("|")&&(s+="| "),u=0):m.includes("|")&&(u=0),s+=m}return o&&u%o.upper===0&&u>0&&!s.includes("|")&&(s="| "+s),u++,`${s} `+(i.offset===0?f.displayAbc:"")}).join(" ")}const Te=""+new URL("rhythmologist_core_bg-P-gH4UxQ.wasm",import.meta.url).href,Oe=async(l={},e)=>{let n;if(e.startsWith("data:")){const u=e.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(u,"base64");else if(typeof atob=="function"){const i=atob(u);o=new Uint8Array(i.length);for(let d=0;d<i.length;d++)o[d]=i.charCodeAt(d)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(o,l)}else{const u=await fetch(e),o=u.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(u,l);else{const i=await u.arrayBuffer();n=await WebAssembly.instantiate(i,l)}}return n.instance.exports};let P;function Fe(l){P=l}const $e=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let he=new $e("utf-8",{ignoreBOM:!0,fatal:!0});he.decode();let le=null;function te(){return(le===null||le.byteLength===0)&&(le=new Uint8Array(P.memory.buffer)),le}function ae(l,e){return l=l>>>0,he.decode(te().subarray(l,l+e))}const z=new Array(128).fill(void 0);z.push(void 0,null,!0,!1);let ee=z.length;function x(l){ee===z.length&&z.push(z.length+1);const e=ee;return ee=z[e],z[e]=l,e}function k(l){return z[l]}function Me(l){l<132||(z[l]=ee,ee=l)}function ne(l){const e=k(l);return Me(l),e}let oe=0;const We=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let ue=new We("utf-8");const ze=typeof ue.encodeInto=="function"?function(l,e){return ue.encodeInto(l,e)}:function(l,e){const n=ue.encode(l);return e.set(n),{read:l.length,written:n.length}};function we(l,e,n){if(n===void 0){const f=ue.encode(l),s=e(f.length,1)>>>0;return te().subarray(s,s+f.length).set(f),oe=f.length,s}let u=l.length,o=e(u,1)>>>0;const i=te();let d=0;for(;d<u;d++){const f=l.charCodeAt(d);if(f>127)break;i[o+d]=f}if(d!==u){d!==0&&(l=l.slice(d)),o=n(o,u,u=d+l.length*3,1)>>>0;const f=te().subarray(o+d,o+u),s=ze(l,f);d+=s.written,o=n(o,u,d,1)>>>0}return oe=d,o}let re=null;function X(){return(re===null||re.byteLength===0)&&(re=new Int32Array(P.memory.buffer)),re}function De(l){try{const o=P.__wbindgen_add_to_stack_pointer(-16),i=we(l,P.__wbindgen_malloc,P.__wbindgen_realloc),d=oe;P.parse_config_json(o,i,d);var e=X()[o/4+0],n=X()[o/4+1],u=X()[o/4+2];if(u)throw ne(n);return ie.__wrap(e)}finally{P.__wbindgen_add_to_stack_pointer(16)}}function Qe(l,e){if(!(l instanceof e))throw new Error(`expected instance of ${e.name}`);return l.ptr}function Ke(l,e){let n,u;try{const c=P.__wbindgen_add_to_stack_pointer(-16);Qe(l,ie);const w=we(e,P.__wbindgen_malloc,P.__wbindgen_realloc),b=oe;P.generate_batch_json(c,l.__wbg_ptr,w,b);var o=X()[c/4+0],i=X()[c/4+1],d=X()[c/4+2],f=X()[c/4+3],s=o,m=i;if(f)throw s=0,m=0,ne(d);return n=s,u=m,ae(s,m)}finally{P.__wbindgen_add_to_stack_pointer(16),P.__wbindgen_free(n,u,1)}}function D(l,e){try{return l.apply(this,e)}catch(n){P.__wbindgen_exn_store(x(n))}}typeof FinalizationRegistry>"u"||new FinalizationRegistry(l=>P.__wbg_config_free(l>>>0));const Ve=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(l=>P.__wbg_ir_free(l>>>0));class ie{static __wrap(e){e=e>>>0;const n=Object.create(ie.prototype);return n.__wbg_ptr=e,Ve.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ve.unregister(this),e}free(){const e=this.__destroy_into_raw();P.__wbg_ir_free(e)}}function Ge(l,e){const n=ae(l,e);return x(n)}function Xe(l){ne(l)}function He(l){const e=k(l).crypto;return x(e)}function Je(l){const e=k(l);return typeof e=="object"&&e!==null}function Ye(l){const e=k(l).process;return x(e)}function Ze(l){const e=k(l).versions;return x(e)}function el(l){const e=k(l).node;return x(e)}function ll(l){return typeof k(l)=="string"}function tl(){return D(function(){const l=module.require;return x(l)},arguments)}function al(l){return typeof k(l)=="function"}function nl(l){const e=k(l).msCrypto;return x(e)}function ol(){return D(function(l,e){k(l).randomFillSync(ne(e))},arguments)}function ul(){return D(function(l,e){k(l).getRandomValues(k(e))},arguments)}function rl(l,e){const n=new Function(ae(l,e));return x(n)}function il(){return D(function(l,e){const n=k(l).call(k(e));return x(n)},arguments)}function sl(l){const e=k(l);return x(e)}function dl(){return D(function(){const l=self.self;return x(l)},arguments)}function cl(){return D(function(){const l=window.window;return x(l)},arguments)}function fl(){return D(function(){const l=globalThis.globalThis;return x(l)},arguments)}function ml(){return D(function(){const l=global.global;return x(l)},arguments)}function _l(l){return k(l)===void 0}function pl(){return D(function(l,e,n){const u=k(l).call(k(e),k(n));return x(u)},arguments)}function bl(l){const e=k(l).buffer;return x(e)}function gl(l,e,n){const u=new Uint8Array(k(l),e>>>0,n>>>0);return x(u)}function yl(l){const e=new Uint8Array(k(l));return x(e)}function vl(l,e,n){k(l).set(k(e),n>>>0)}function hl(l){const e=new Uint8Array(l>>>0);return x(e)}function wl(l,e,n){const u=k(l).subarray(e>>>0,n>>>0);return x(u)}function Vl(l,e){throw new Error(ae(l,e))}function kl(){const l=P.memory;return x(l)}URL=globalThis.URL;const T=await Oe({"./rhythmologist_core_bg.js":{__wbindgen_string_new:Ge,__wbindgen_object_drop_ref:Xe,__wbg_crypto_1d1f22824a6a080c:He,__wbindgen_is_object:Je,__wbg_process_4a72847cc503995b:Ye,__wbg_versions_f686565e586dd935:Ze,__wbg_node_104a2ff8d6ea03a2:el,__wbindgen_is_string:ll,__wbg_require_cca90b1a94a0255b:tl,__wbindgen_is_function:al,__wbg_msCrypto_eb05e62b530a1508:nl,__wbg_randomFillSync_5c9c955aa56b6049:ol,__wbg_getRandomValues_3aa56aa6edec874c:ul,__wbg_newnoargs_e258087cd0daa0ea:rl,__wbg_call_27c0f87801dedf93:il,__wbindgen_object_clone_ref:sl,__wbg_self_ce0dbfc45cf2f5be:dl,__wbg_window_c6fb939a7f436783:cl,__wbg_globalThis_d1e6af4856ba331b:fl,__wbg_global_207b558942527489:ml,__wbindgen_is_undefined:_l,__wbg_call_b3ca7c6051f9bec1:pl,__wbg_buffer_12d079cc21e14bdb:bl,__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:gl,__wbg_new_63b92bc8671ed464:yl,__wbg_set_a47bac70306a19a7:vl,__wbg_newwithlength_e9b4878cebadb3d3:hl,__wbg_subarray_a1f73cd4b5b42fe1:wl,__wbindgen_throw:Vl,__wbindgen_memory:kl}},Te),El=T.memory,Sl=T.parse_config_json,xl=T.generate_batch_yaml,Cl=T.generate_batch_json,Ul=T.__wbg_config_free,Al=T.__wbg_ir_free,Pl=T.__wbindgen_add_to_stack_pointer,Rl=T.__wbindgen_malloc,Il=T.__wbindgen_realloc,jl=T.__wbindgen_free,Ll=T.__wbindgen_exn_store,Bl=Object.freeze(Object.defineProperty({__proto__:null,__wbg_config_free:Ul,__wbg_ir_free:Al,__wbindgen_add_to_stack_pointer:Pl,__wbindgen_exn_store:Ll,__wbindgen_free:jl,__wbindgen_malloc:Rl,__wbindgen_realloc:Il,generate_batch_json:Cl,generate_batch_yaml:xl,memory:El,parse_config_json:Sl},Symbol.toStringTag,{value:"Module"}));Fe(Bl);const de=je("appStatus",()=>{const l=$(),e=j("editing"),n=j(""),u=j([]),o=j(""),i=j(null);pt(()=>{try{i.value=De(JSON.stringify(l.config)),e.value="editing"}catch(m){i.value=null,o.value=m.toString(),e.value="edit-err"}});function d(){e.value="editing"}function f(){if(i.value!==null){u.value=[],e.value="running";try{const m=Ke(i.value,n.value);u.value=JSON.parse(m),e.value="result"}catch(m){o.value=m.toString(),e.value="exec-err"}}}function s(m=!1){const c=ve(u.value,l.config,m);ye(c,"generation.abc")}return{currentStep:e,selectedPresetName:n,generationResult:u,errorMsg:o,configParsed:i,edit:d,run:f,exportAbc:s}}),Q=Symbol("keyForXObjArray");function ke(l){return l[Q]||(l[Q]=Symbol()),l[Q]}const Nl={style:{"margin-bottom":"8px"}},ql={style:{"margin-bottom":"8px"}},Tl=I({__name:"ConfigChildItemList",props:J({defaultNewItemValue:{},dialogTitle:{default:""},dialogPrompt:{default:""},dialogErrorText:{default:""},disableScroll:{type:Boolean,default:!0},retrieveKey:{type:Function,default:(l,e)=>e}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=l,u=j(!1),o=j(""),i=K(()=>!(o.value in e.value)&&o.value.length>0);function d(){Array.isArray(e.value)?e.value.push(n.defaultNewItemValue()):(e.value[o.value]=n.defaultNewItemValue(),o.value="",u.value=!1)}function f(){Array.isArray(e.value)?d():u.value=!0}function s(b){Array.isArray(e.value)?e.value.splice(b,1):delete e.value[b]}function m(b){if(Array.isArray(e.value)){const _=n.defaultNewItemValue();typeof e.value[b][Q]<"u"&&(_[Q]=e.value[b][Q]),e.value[b]=_}else e.value[b]=n.defaultNewItemValue()}function c(b){if(Array.isArray(e.value)){let _=e.value.splice(b,1);e.value.splice(b-1,0,..._)}}function w(b){if(Array.isArray(e.value)){let _=e.value.splice(b,1);e.value.splice(b+1,0,..._)}}return(b,_)=>{const A=r("ElIcon"),O=r("ElButton"),F=r("ElForm"),R=r("ElCollapseItem"),L=r("ElCollapse"),y=r("ElScrollbar"),V=r("ElInput"),C=r("ElText"),Ie=r("el-button"),ct=r("ElDialog");return g(),E(U,null,[S("div",{class:yt({"disable-scroll":n.disableScroll}),style:{display:"flex","flex-direction":"column"}},[S("div",Nl,[t(O,{onClick:_[0]||(_[0]=M=>f())},{default:a(()=>[t(A,null,{default:a(()=>[t(p(bt))]),_:1})]),_:1}),_e(b.$slots,"customActions",{},void 0,!0)]),t(y,{style:{"padding-right":"10px"}},{default:a(()=>[t(L,null,{default:a(()=>[(g(!0),E(U,null,N(e.value,(M,W)=>(g(),v(R,{key:b.retrieveKey(M,W)},{title:a(()=>[_e(b.$slots,"itemTitle",{item:M,key:W},()=>[h(q(W),1)],!0),Array.isArray(e.value)?(g(),E(U,{key:0},[W!==0?(g(),v(A,{key:0,class:"icon",onClick:G(fe=>c(W),["stop"])},{default:a(()=>[t(p(Le))]),_:2},1032,["onClick"])):B("",!0),W<e.value.length-1?(g(),v(A,{key:1,class:"icon",onClick:G(fe=>w(W),["stop"])},{default:a(()=>[t(p(Be))]),_:2},1032,["onClick"])):B("",!0)],64)):B("",!0),t(A,{class:"icon",onClick:G(fe=>m(W),["stop"])},{default:a(()=>[t(p(gt))]),_:2},1032,["onClick"]),t(A,{class:"icon",onClick:G(fe=>s(W),["stop"])},{default:a(()=>[t(p(pe))]),_:2},1032,["onClick"])]),default:a(()=>[t(F,{"label-position":"top"},{default:a(()=>[_e(b.$slots,"default",{item:M,key:W},void 0,!0)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})],2),t(ct,{modelValue:u.value,"onUpdate:modelValue":_[4]||(_[4]=M=>u.value=M),title:n.dialogTitle},{footer:a(()=>[S("span",null,[t(Ie,{onClick:_[2]||(_[2]=M=>u.value=!1)},{default:a(()=>[h("\u53D6\u6D88")]),_:1}),t(Ie,{type:"primary",disabled:!i.value,onClick:_[3]||(_[3]=M=>d())},{default:a(()=>[h(" \u6DFB\u52A0 ")]),_:1},8,["disabled"])])]),default:a(()=>[S("div",ql,q(n.dialogPrompt),1),t(V,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=M=>o.value=M)},null,8,["modelValue"]),be(t(C,{type:"danger"},{default:a(()=>[h(q(n.dialogErrorText),1)]),_:1},512),[[ge,!i.value]])]),_:1},8,["modelValue","title"])],64)}}}),Ee=(l,e)=>{const n=l.__vccOpts||l;for(const[u,o]of e)n[u]=o;return n},H=Ee(Tl,[["__scopeId","data-v-6ef516a3"]]),Ol="modulepreload",Fl=function(l,e){return new URL(l,e).href},Se={},xe=function(l,e,n){let u=Promise.resolve();if(e&&e.length>0){const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),d=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));u=Promise.all(e.map(f=>{if(f=Fl(f,n),f in Se)return;Se[f]=!0;const s=f.endsWith(".css"),m=s?'[rel="stylesheet"]':"";if(n)for(let w=o.length-1;w>=0;w--){const b=o[w];if(b.href===f&&(!s||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${m}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Ol,s||(c.as="script",c.crossOrigin=""),c.href=f,d&&c.setAttribute("nonce",d),document.head.appendChild(c),s)return new Promise((w,b)=>{c.addEventListener("load",w),c.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}return u.then(()=>l()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},Ce=Object.assign({"./4x-1beat-basic.json":()=>xe(()=>import("./4x-1beat-basic-DQjnCmK2.js"),[],import.meta.url),"./8x-3beat-basic.json":()=>xe(()=>import("./8x-3beat-basic-BO-0meST.js"),[],import.meta.url)}),Ue=I({__name:"AbcNotationRenderer",props:{score:{},count:{}},setup(l){const e=l,n=j(null);function u(){if(n.value){const o=new Array(e.count).fill(null).map(()=>document.createElement("div"));wt.renderAbc(o,e.score),n.value.replaceChildren(...o)}}return vt(()=>{ht(()=>{u()})}),(o,i)=>(g(),E("div",{ref_key:"abcContainer",ref:n},null,512))}}),$l=I({__name:"PatternsPane",setup(l){const e=$();function n(u){Ce[u]().then(({patterns:o})=>{Object.assign(e.config.patterns,o)})}return(u,o)=>{const i=r("el-icon"),d=r("el-button"),f=r("el-dropdown-item"),s=r("el-dropdown-menu"),m=r("el-dropdown"),c=r("ElInputNumber"),w=r("ElFormItem"),b=r("ElInput");return g(),v(H,{modelValue:p(e).config.patterns,"onUpdate:modelValue":o[0]||(o[0]=_=>p(e).config.patterns=_),"default-new-item-value":()=>({length:1}),"dialog-title":"\u6DFB\u52A0\u8282\u594F\u578B","dialog-prompt":"\u8BF7\u4E3A\u8282\u594F\u578B\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u8282\u594F\u578B\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u8282\u594F\u578B\u91CD\u590D\u3002"},{customActions:a(()=>[t(m,{style:{"margin-left":"8px"},onCommand:n},{dropdown:a(()=>[t(s,null,{default:a(()=>[(g(!0),E(U,null,N(Object.keys(p(Ce)),_=>(g(),v(f,{key:_,command:_},{default:a(()=>[h(q(_.substring(2,_.length-5)),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:a(()=>[t(d,null,{default:a(()=>[h(" \u5BFC\u5165\u8282\u594F\u578B "),t(i,{class:"el-icon--right"},{default:a(()=>[t(p(Vt))]),_:1})]),_:1})]),_:1})]),default:a(({item:_})=>[t(w,{label:"\u957F\u5EA6length",required:""},{default:a(()=>[t(c,{modelValue:_.length,"onUpdate:modelValue":A=>_.length=A},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{label:"\u663E\u793A\u540D\u79F0displayName"},{default:a(()=>[t(b,{modelValue:_.displayName,"onUpdate:modelValue":A=>_.displayName=A},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{label:"ABC\u683C\u5F0F\u663E\u793A\u5185\u5BB9displayAbc (\u9ED8\u8BA4L: 1/16)"},{default:a(()=>[t(b,{modelValue:_.displayAbc,"onUpdate:modelValue":A=>_.displayAbc=A},null,8,["modelValue","onUpdate:modelValue"]),t(Ue,{score:`
X: 0
V: T1 stem=up
K: none perc stafflines=1 middle=A
L: 1/16
${_.displayAbc?_.displayAbc:""}
`,count:1},null,8,["score"])]),_:2},1024)]),_:1},8,["modelValue"])}}}),Ml=I({__name:"CategoriesPane",setup(l){const e=$();return(n,u)=>{const o=r("ElOption"),i=r("ElSelect"),d=r("ElFormItem");return g(),v(H,{modelValue:p(e).config.categories,"onUpdate:modelValue":u[0]||(u[0]=f=>p(e).config.categories=f),"default-new-item-value":()=>[],"dialog-title":"\u6DFB\u52A0\u7C7B\u522B","dialog-prompt":"\u8BF7\u4E3A\u8282\u594F\u578B\u7C7B\u522B\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u7C7B\u522B\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u7C7B\u522B\u540D\u91CD\u590D\u3002"},{default:a(({key:f})=>[t(d,{required:""},{default:a(()=>[t(i,{modelValue:p(e).config.categories[f],"onUpdate:modelValue":s=>p(e).config.categories[f]=s,multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,N(p(e).config.patterns,(s,m)=>(g(),v(o,{key:m,label:m,value:m},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1},8,["modelValue"])}}}),Wl=I({__name:"FillEachBlankActionView",props:J({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=l;return(u,o)=>{const i=r("ElOption"),d=r("ElSelect"),f=r("ElFormItem"),s=r("ElCard");return e.value?(g(),E(U,{key:0},[t(f,{label:"\u533A\u57DF\u8303\u56F4in",required:""},{default:a(()=>[t(d,{modelValue:e.value.in,"onUpdate:modelValue":o[0]||(o[0]=m=>e.value.in=m),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,N(n.parentRuleSet.layout,(m,c)=>(g(),v(i,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u8C03\u7528\u52A8\u4F5Cwith",required:""},{default:a(()=>[t(s,{shadow:"never",style:{width:"100%"},class:"card-remove-last-margin-bottom"},{default:a(()=>[t(se,{modelValue:e.value.with,"onUpdate:modelValue":o[1]||(o[1]=m=>e.value.with=m),mode:"action","parent-rule-set":u.parentRuleSet},null,8,["modelValue","parent-rule-set"])]),_:1})]),_:1})],64)):B("",!0)}}}),zl=I({__name:"ChooseARandomPositionActionView",props:J({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=l;return(u,o)=>{const i=r("ElOption"),d=r("ElSelect"),f=r("ElFormItem"),s=r("ElInputNumber"),m=r("ElCard");return e.value?(g(),E(U,{key:0},[t(f,{label:"\u533A\u57DF\u8303\u56F4in",required:""},{default:a(()=>[t(d,{modelValue:e.value.in,"onUpdate:modelValue":o[0]||(o[0]=c=>e.value.in=c),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,N(n.parentRuleSet.layout,(c,w)=>(g(),v(i,{key:w,label:w,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u957F\u5EA6length",required:""},{default:a(()=>[t(s,{modelValue:e.value.length,"onUpdate:modelValue":o[1]||(o[1]=c=>e.value.length=c)},null,8,["modelValue"])]),_:1}),t(f,{label:"\u8C03\u7528\u52A8\u4F5Cdo",required:""},{default:a(()=>[t(m,{shadow:"never",style:{width:"100%"},class:"card-remove-last-margin-bottom"},{default:a(()=>[t(se,{modelValue:e.value.do,"onUpdate:modelValue":o[2]||(o[2]=c=>e.value.do=c),mode:"action","parent-rule-set":u.parentRuleSet},null,8,["modelValue","parent-rule-set"])]),_:1})]),_:1})],64)):B("",!0)}}}),Ae=I({__name:"RandomPickActionView",props:J({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=$(),n=Y(l,"modelValue"),u=l;return(o,i)=>{const d=r("ElOption"),f=r("ElSelect"),s=r("ElButton"),m=r("ElFormItem"),c=r("ElInputNumber"),w=r("ElCard");return n.value?(g(),E(U,{key:0},[t(m,{label:"\u4ECE\u5206\u7C7B\u4E2D\u9009\u53D6\u8282\u594F\u578BfromCategories"},{default:a(()=>[n.value.fromCategories?(g(),v(f,{key:0,modelValue:n.value.fromCategories,"onUpdate:modelValue":i[0]||(i[0]=b=>n.value.fromCategories=b),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,N(p(e).config.categories,(b,_)=>(g(),v(d,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(g(),v(s,{key:1,onClick:i[1]||(i[1]=b=>n.value.fromCategories=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1}),t(m,{label:"\u4ECE\u6B64\u5217\u8868\u4E2D\u9009\u53D6\u8282\u594F\u578BfromList"},{default:a(()=>[n.value.fromList?(g(),v(f,{key:0,modelValue:n.value.fromList,"onUpdate:modelValue":i[2]||(i[2]=b=>n.value.fromList=b),multiple:"",filterable:""},{default:a(()=>[(g(!0),E(U,null,N(p(e).config.patterns,(b,_)=>(g(),v(d,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(g(),v(s,{key:1,onClick:i[3]||(i[3]=b=>n.value.fromList=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1}),t(m,{label:"\u6700\u5927\u957F\u5EA6maxLength"},{default:a(()=>[t(c,{modelValue:n.value.maxLength,"onUpdate:modelValue":i[4]||(i[4]=b=>n.value.maxLength=b)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u5728\u6B64\u5E03\u5C40\u533A\u57DF\u5F00\u5934\u653E\u7F6Ein"},{default:a(()=>[t(f,{modelValue:n.value.in,"onUpdate:modelValue":i[5]||(i[5]=b=>n.value.in=b),filterable:""},{default:a(()=>[(g(!0),E(U,null,N(u.parentRuleSet.layout,(b,_)=>(g(),v(d,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u5728\u6307\u5B9A\u8282\u62CD\u4F4D\u7F6E\u653E\u7F6E(0\u8D77\u8BA1\u6570)at"},{default:a(()=>[t(c,{modelValue:n.value.at,"onUpdate:modelValue":i[6]||(i[6]=b=>n.value.at=b)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7EA6\u675Fconstraints"},{default:a(()=>[n.value.constraints?(g(),v(w,{key:0,shadow:"never",style:{width:"100%"}},{default:a(()=>[t(H,{modelValue:n.value.constraints,"onUpdate:modelValue":i[7]||(i[7]=b=>n.value.constraints=b),"default-new-item-value":()=>({type:"Blank"}),"disable-scroll":!1,"retrieve-key":p(ke)},{itemTitle:a(({item:b,key:_})=>[h(q(_)+" : "+q(b.type),1)]),default:a(({key:b})=>[t(se,{modelValue:n.value.constraints[b],"onUpdate:modelValue":_=>n.value.constraints[b]=_,mode:"constraint","parent-rule-set":u.parentRuleSet},null,8,["modelValue","onUpdate:modelValue","parent-rule-set"])]),_:1},8,["modelValue","retrieve-key"])]),_:1})):(g(),v(s,{key:1,onClick:i[8]||(i[8]=b=>n.value.constraints=[])},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))]),_:1})],64)):B("",!0)}}}),Dl=I({__name:"UsageCountGroupConstraintView",props:J({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue");return(n,u)=>{const o=r("ElInput"),i=r("ElFormItem");return e.value?(g(),v(i,{key:0,label:"\u540D\u79F0name",required:""},{default:a(()=>[t(o,{modelValue:e.value.name,"onUpdate:modelValue":u[0]||(u[0]=d=>e.value.name=d)},null,8,["modelValue"])]),_:1})):B("",!0)}}}),Ql={style:{"margin-top":"4px",display:"flex","align-items":"center"}},Kl=I({__name:"RejectPatternWithUsageCountConstraintView",props:J({parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=K(()=>e.value.value==="max"||e.value.value==="maxAutoBalance"||typeof e.value.value=="number");return(u,o)=>{const i=r("ElRadio"),d=r("ElRadioGroup"),f=r("ElFormItem"),s=r("ElInput"),m=r("ElOption"),c=r("ElSelect"),w=r("ElText"),b=r("ElButton");return e.value?(g(),E(U,{key:0},[t(f,{label:"\u5C42\u7EA7level",required:""},{default:a(()=>[t(d,{modelValue:e.value.level,"onUpdate:modelValue":o[0]||(o[0]=_=>e.value.level=_)},{default:a(()=>[t(i,{value:"batch"},{default:a(()=>[h("\u6279\u6B21batch")]),_:1}),t(i,{value:"piece"},{default:a(()=>[h("\u6761\u76EEpiece")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u8BA1\u6570\u7EC4\u540D\u79F0groupName",required:""},{default:a(()=>[t(s,{modelValue:e.value.groupName,"onUpdate:modelValue":o[1]||(o[1]=_=>e.value.groupName=_)},null,8,["modelValue"])]),_:1}),t(f,{label:"\u6BD4\u8F83\u8FD0\u7B97\u7B26comparator",required:""},{default:a(()=>[t(c,{modelValue:e.value.comparator,"onUpdate:modelValue":o[2]||(o[2]=_=>e.value.comparator=_)},{default:a(()=>[(g(),E(U,null,N(["<","<=","==",">=",">","!="],_=>t(m,{key:_,label:_,value:_},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u6BD4\u8F83\u503Cvalue",required:""},{default:a(()=>[t(s,{modelValue:e.value.value,"onUpdate:modelValue":o[3]||(o[3]=_=>e.value.value=_),modelModifiers:{number:!0}},null,8,["modelValue"]),S("div",Ql,[t(w,{size:"small"},{default:a(()=>[h("\u7279\u6B8A\u503C\uFF1A")]),_:1}),t(b,{size:"small",onClick:o[4]||(o[4]=_=>e.value.value="max")},{default:a(()=>[h("max")]),_:1}),t(b,{size:"small",onClick:o[5]||(o[5]=_=>e.value.value="maxAutoBalance")},{default:a(()=>[h("maxAutoBalance")]),_:1})]),be(t(w,{type:"danger"},{default:a(()=>[h("value\u503C\u65E0\u6548\uFF0C\u5E94\u4E3A\u6570\u5B57\u6216\u201Cmax\u201D\uFF0C\u201CmaxAutoBalance\u201D")]),_:1},512),[[ge,!n.value]])]),_:1})],64)):B("",!0)}}}),{allActions:Gl,allConstraints:Xl,optionsRegistry:Pe}=function(){const l={Blank:{defaults:()=>({type:"Blank"}),view:{}},FillEachBlank:{defaults:()=>({type:"FillEachBlank",in:[],with:{type:"Blank"}}),view:Wl},ChooseARandomPosition:{defaults:()=>({type:"ChooseARandomPosition",in:[],length:1,do:{type:"Blank"}}),view:zl},RandomPick:{defaults:()=>({type:"RandomPick"}),view:Ae},PickSequentially:{defaults:()=>({type:"PickSequentially"}),view:Ae}},e={Blank:{defaults:()=>({type:"Blank"}),view:{}},UsageCountGroup:{defaults:()=>({type:"UsageCountGroup",name:""}),view:Dl},RejectPatternWithUsageCount:{defaults:()=>({type:"RejectPatternWithUsageCount",level:"piece",groupName:"",comparator:">=",value:"maxAutoBalance"}),view:Kl}};return{allActions:Object.keys(l),allConstraints:Object.keys(e),optionsRegistry:{...l,...e}}}(),se=I({__name:"XObjEditor",props:J({mode:{},parentRuleSet:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Y(l,"modelValue"),n=K({get:()=>e.value.type,set:u=>{e.value={...Pe[u].defaults(),[Q]:e.value[Q]}}});return(u,o)=>{const i=r("ElOption"),d=r("ElSelect"),f=r("ElFormItem");return g(),E(U,null,[t(f,{label:"\u7C7B\u578Btype",required:""},{default:a(()=>[t(d,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=s=>n.value=s),filterable:""},{default:a(()=>[(g(!0),E(U,null,N(u.mode==="action"?p(Gl):p(Xl),s=>(g(),v(i,{key:s,value:s},null,8,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.value.type!=="Blank"?(g(),v(Ne(p(Pe)[e.value.type].view),{key:0,modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value=s),"parent-rule-set":u.parentRuleSet},null,8,["modelValue","parent-rule-set"])):B("",!0)],64)}}}),Hl=I({__name:"RuleSetsPane",setup(l){const e=$(),n=j(0),u=j("");function o(i,d){d([{value:"[M: 4/4] [Q: 1/4=72]",label:"[M: 4/4] [Q: 1/4=72]\uFF08\u66F4\u6362\u62CD\u53F7\u5E76\u66F4\u6539\u901F\u5EA6\uFF09"},{value:"[M: 4/4]",label:"[M: 4/4]\uFF08\u66F4\u6362\u62CD\u53F7\uFF09"},{value:"|",label:"|\uFF08\u5C0F\u8282\u7EBF\uFF09"},{value:"[Q: 1/4=72]",label:"[Q: 1/4=72]\uFF08\u66F4\u6539\u901F\u5EA6\uFF09"}])}return(i,d)=>{const f=r("ElInputNumber"),s=r("ElFormItem"),m=r("el-autocomplete"),c=r("ElButton"),w=r("ElForm"),b=r("el-table-column"),_=r("ElIcon"),A=r("ElTableColumn"),O=r("el-table"),F=r("ElCard");return g(),v(H,{modelValue:p(e).config.ruleSets,"onUpdate:modelValue":d[2]||(d[2]=R=>p(e).config.ruleSets=R),"default-new-item-value":()=>({scoreInsertions:{0:"[M: 4/4] [Q: 1/4=72]"},pieceLength:8,layout:{},actions:[]}),"dialog-title":"\u6DFB\u52A0\u89C4\u5219\u96C6","dialog-prompt":"\u8BF7\u4E3A\u89C4\u5219\u96C6\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u89C4\u5219\u96C6\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u89C4\u5219\u96C6\u91CD\u590D\u3002"},{default:a(({item:R,key:L})=>[t(s,{label:"\u4E50\u8C31\u63D2\u5165\u6587\u672CscoreInsertions",required:""},{default:a(()=>[t(F,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(w,{inline:""},{default:a(()=>[t(s,null,{default:a(()=>[t(f,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=y=>n.value=y),placeholder:"\u8282\u62CD\u5E8F\u53F7\uFF08\u96F6\u8D77\uFF09beatIndex"},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(m,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=y=>u.value=y),placeholder:"\u5185\u5BB9content","fetch-suggestions":o},{default:a(({item:y})=>[h(q(y.label),1)]),_:2},1032,["modelValue"])]),_:2},1024),t(s,null,{default:a(()=>[t(c,{onClick:y=>R.scoreInsertions[n.value]=u.value},{default:a(()=>[h("\u6DFB\u52A0")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(O,{data:Object.entries(R.scoreInsertions)},{default:a(()=>[t(b,{prop:"0",label:"\u8282\u62CD\u5E8F\u53F7\uFF08\u96F6\u8D77\uFF09beatIndex"}),t(b,{prop:"1",label:"\u5185\u5BB9content"}),t(A,{label:"\u64CD\u4F5C",width:"55px"},{default:a(y=>[t(c,{link:"",onClick:G(V=>delete R.scoreInsertions[y.row[0]],["prevent"])},{default:a(()=>[t(_,null,{default:a(()=>[t(p(pe))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])]),_:2},1024)]),_:2},1024),t(s,{label:"\u6BCF\u6761\u957F\u5EA6pieceLength",required:""},{default:a(()=>[t(f,{modelValue:R.pieceLength,"onUpdate:modelValue":y=>R.pieceLength=y},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u5E03\u5C40layout",required:""},{default:a(()=>[t(F,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(H,{modelValue:p(e).config.ruleSets[L].layout,"onUpdate:modelValue":y=>p(e).config.ruleSets[L].layout=y,"default-new-item-value":()=>({start:0,end:R.pieceLength}),"dialog-title":"\u6DFB\u52A0\u5E03\u5C40\u533A\u57DF","dialog-prompt":"\u8BF7\u4E3A\u5E03\u5C40\u533A\u57DF\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u5E03\u5C40\u533A\u57DF\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u5E03\u5C40\u533A\u57DF\u91CD\u590D\u3002","disable-scroll":!1},{default:a(({item:y})=>[t(s,{label:"\u8D77\u70B9(\u542B)start",required:""},{default:a(()=>[t(f,{modelValue:y.start,"onUpdate:modelValue":V=>y.start=V},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(s,{label:"\u7EC8\u70B9(\u4E0D\u542B)end",required:""},{default:a(()=>[t(f,{modelValue:y.end,"onUpdate:modelValue":V=>y.end=V},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","default-new-item-value"])]),_:2},1024)]),_:2},1024),t(s,{label:"\u52A8\u4F5Cactions",required:""},{default:a(()=>[t(F,{shadow:"never",style:{width:"100%"}},{default:a(()=>[t(H,{modelValue:p(e).config.ruleSets[L].actions,"onUpdate:modelValue":y=>p(e).config.ruleSets[L].actions=y,"default-new-item-value":()=>({type:"Blank"}),"disable-scroll":!1,"retrieve-key":p(ke)},{itemTitle:a(({item:y,key:V})=>[h(q(V)+" : "+q(y.type),1)]),default:a(({key:y})=>[t(se,{modelValue:p(e).config.ruleSets[L].actions[y],"onUpdate:modelValue":V=>p(e).config.ruleSets[L].actions[y]=V,mode:"action","parent-rule-set":p(e).config.ruleSets[L]},null,8,["modelValue","onUpdate:modelValue","parent-rule-set"])]),_:2},1032,["modelValue","onUpdate:modelValue","retrieve-key"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])}}}),Jl={style:{display:"flex","justify-content":"flex-end"}},Yl=I({__name:"BatchPresetsPane",setup(l){const e=$(),n=j(""),u=j(1);function o(s){e.config.batchPresets&&e.config.batchPresets[s].push({ruleSetName:n.value,amount:u.value})}function i(s,m){e.config.batchPresets&&e.config.batchPresets[s].splice(m,1)}function d(s,m){if(e.config.batchPresets){let c=e.config.batchPresets[s].splice(m,1);e.config.batchPresets[s].splice(m-1,0,...c)}}function f(s,m){if(e.config.batchPresets){let c=e.config.batchPresets[s].splice(m,1);e.config.batchPresets[s].splice(m+1,0,...c)}}return(s,m)=>{const c=r("ElOption"),w=r("ElSelect"),b=r("ElFormItem"),_=r("ElInputNumber"),A=r("ElButton"),O=r("ElForm"),F=r("ElTableColumn"),R=r("ElIcon"),L=r("ElTable");return p(e).config.batchPresets?(g(),v(H,{key:0,modelValue:p(e).config.batchPresets,"onUpdate:modelValue":m[2]||(m[2]=y=>p(e).config.batchPresets=y),"default-new-item-value":()=>[],"dialog-title":"\u6DFB\u52A0\u6279\u91CF\u751F\u6210\u9884\u8BBE","dialog-prompt":"\u8BF7\u4E3A\u6279\u91CF\u751F\u6210\u9884\u8BBE\u8BBE\u5B9A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u540D\u79F0\uFF0C\u6B64\u540D\u79F0\u4F1A\u5728\u5176\u4ED6\u5730\u65B9\u7528\u4E8E\u6307\u4EE3\u6B64\u9884\u8BBE\u3002","dialog-error-text":"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0E\u73B0\u6709\u6279\u91CF\u751F\u6210\u9884\u8BBE\u91CD\u590D\u3002"},{default:a(({key:y})=>[t(O,{inline:"",style:{display:"flex"}},{default:a(()=>[t(b,{style:{width:"calc((100% - 110px) * 0.5)"}},{default:a(()=>[t(w,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=V=>n.value=V),placeholder:"\u89C4\u5219\u96C6\u540D\u79F0ruleSetName",filterable:""},{default:a(()=>[(g(!0),E(U,null,N(Object.keys(p(e).config.ruleSets),V=>(g(),v(c,{key:V,label:V,value:V},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(_,{modelValue:u.value,"onUpdate:modelValue":m[1]||(m[1]=V=>u.value=V),placeholder:"\u6570\u91CFamount"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(A,{onClick:V=>o(y)},{default:a(()=>[h("\u6DFB\u52A0")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(L,{data:p(e).config.batchPresets[y]},{default:a(()=>[t(F,{prop:"ruleSetName",label:"\u89C4\u5219\u96C6\u540D\u79F0ruleSetName"}),t(F,{prop:"amount",label:"\u6570\u91CFamount"}),t(F,{label:"\u64CD\u4F5C",width:"110px"},{default:a(V=>[S("div",Jl,[V.$index>0?(g(),v(A,{key:0,link:"",onClick:G(C=>d(y,V.$index),["stop"])},{default:a(()=>[t(R,null,{default:a(()=>[t(p(Le))]),_:1})]),_:2},1032,["onClick"])):B("",!0),V.$index<p(e).config.batchPresets[y].length-1?(g(),v(A,{key:1,link:"",onClick:G(C=>f(y,V.$index),["stop"])},{default:a(()=>[t(R,null,{default:a(()=>[t(p(Be))]),_:1})]),_:2},1032,["onClick"])):B("",!0),t(A,{link:"",onClick:G(C=>i(y,V.$index),["prevent"])},{default:a(()=>[t(R,null,{default:a(()=>[t(p(pe))]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["data"])]),_:1},8,["modelValue"])):(g(),v(A,{key:1,onClick:m[3]||(m[3]=y=>p(e).config.batchPresets={})},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))}}}),Zl=I({__name:"SettingsPane",setup(l){const e=$();return kt(()=>{var n;return(n=e.config.settings)==null?void 0:n.autoSeed},n=>{n&&delete e.config.settings.fixedSeed}),(n,u)=>{const o=r("ElSwitch"),i=r("ElFormItem"),d=r("ElInput"),f=r("ElForm"),s=r("ElButton");return p(e).config.settings?(g(),v(f,{key:0,"label-position":"top"},{default:a(()=>[t(i,{label:"\u81EA\u52A8\u8BBE\u7F6E\u968F\u673A\u6570\u79CD\u5B50autoSeed"},{default:a(()=>[t(o,{modelValue:p(e).config.settings.autoSeed,"onUpdate:modelValue":u[0]||(u[0]=m=>p(e).config.settings.autoSeed=m)},null,8,["modelValue"])]),_:1}),be(t(i,{label:"\u56FA\u5B9A\u79CD\u5B50\u6570\u503CfixedSeed"},{default:a(()=>[t(d,{modelValue:p(e).config.settings.fixedSeed,"onUpdate:modelValue":u[1]||(u[1]=m=>p(e).config.settings.fixedSeed=m),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},512),[[ge,!p(e).config.settings.autoSeed]])]),_:1})):(g(),v(s,{key:1,onClick:u[2]||(u[2]=m=>p(e).config.settings={})},{default:a(()=>[h("\u521B\u5EFA")]),_:1}))}}}),Re=I({__name:"EditorPage",setup(l){const e=$(),n=de();return(u,o)=>{const i=r("el-text"),d=r("ElTabPane"),f=r("ElTabs"),s=r("ElCol"),m=r("ElScrollbar"),c=r("ElRow");return g(),v(c,{class:"disable-scroll"},{default:a(()=>[t(s,{span:16,class:"disable-scroll"},{default:a(()=>[p(n).currentStep==="edit-err"?(g(),v(i,{key:0,type:"danger"},{default:a(()=>[h(" \u9519\u8BEF\uFF1A"+q(p(n).errorMsg),1)]),_:1})):B("",!0),t(f,{"tab-position":"left",class:"disable-scroll"},{default:a(()=>[t(d,{label:"\u8282\u594F\u578B\u5217\u8868patterns",class:"disable-scroll"},{default:a(()=>[t($l)]),_:1}),t(d,{label:"\u8282\u594F\u578B\u5206\u7C7Bcategories",class:"disable-scroll"},{default:a(()=>[t(Ml)]),_:1}),t(d,{label:"\u89C4\u5219\u96C6ruleSets",class:"disable-scroll"},{default:a(()=>[t(Hl)]),_:1}),t(d,{label:"\u6279\u91CF\u751F\u6210\u9884\u8BBEbatchPresets",class:"disable-scroll"},{default:a(()=>[t(Yl)]),_:1}),t(d,{label:"\u751F\u6210\u5668\u8BBE\u7F6Esettings",class:"disable-scroll"},{default:a(()=>[t(Zl)]),_:1})]),_:1})]),_:1}),t(s,{span:8,class:"disable-scroll"},{default:a(()=>[t(m,null,{default:a(()=>[S("code",null,[S("pre",null,q(p(me).stringify(p(e).config)),1)])]),_:1})]),_:1})]),_:1})}}}),et=I({__name:"ResultPage",setup(l){const e=de(),n=$(),u=K(()=>ve(e.generationResult,n.config));return(o,i)=>{const d=r("el-text"),f=r("ElScrollbar");return g(),v(f,null,{default:a(()=>[p(e).currentStep==="exec-err"?(g(),v(d,{key:0,type:"danger"},{default:a(()=>[h(" \u9519\u8BEF\uFF1A"+q(p(e).errorMsg),1)]),_:1})):(g(),v(Ue,{key:1,score:u.value,count:p(e).generationResult.length},null,8,["score","count"]))]),_:1})}}}),Z=l=>(St("data-v-706c9bac"),l=l(),xt(),l),lt={style:{"margin-left":"50px","margin-right":"50px",flex:"1"}},tt={style:{"margin-left":"auto"}},at=Z(()=>S("h1",null,"Rhythmologist",-1)),nt=Z(()=>S("p",null,"Copyright \xA9 2024 Liu Chibing. All rights reserved.",-1)),ot=Z(()=>S("h2",null,"\u9E23\u8C22",-1)),ut=Z(()=>S("p",null,"\u738B\u6654 \u6559\u6388",-1)),rt=Z(()=>S("h3",null,"\u5F00\u6E90\u4EE3\u7801",-1)),it=Z(()=>S("ul",null,[S("li",null,"abcjs"),S("li",null,"Vue"),S("li",null,"Element Plus"),S("li",null,"TypeScript"),S("li",null,"Rust"),S("li",null,"Electron")],-1)),st=I({__name:"App",setup(l){const e=de(),n=$(),u=K(()=>{switch(e.currentStep){case"editing":case"edit-err":return 1;case"running":case"exec-err":case"result":return 2;default:return 0}}),o=K(()=>{switch(e.currentStep){case"editing":return"process";case"edit-err":return"error";case"running":case"exec-err":case"result":return"success";default:return"wait"}}),i=K(()=>{switch(e.currentStep){case"editing":case"edit-err":return"wait";case"running":return"process";case"exec-err":return"error";case"result":return"success";default:return"wait"}}),d=K(()=>{switch(e.currentStep){case"editing":case"edit-err":return Re;case"running":case"exec-err":case"result":return et;default:return Re}}),f=j(!1),s=j(!1);return(m,c)=>{const w=r("ElStep"),b=r("ElSteps"),_=r("ElOption"),A=r("ElSelect"),O=r("ElButton"),F=r("ElHeader"),R=r("ElMain"),L=r("ElContainer"),y=r("ElDialog"),V=r("el-button");return g(),E(U,null,[t(L,{class:"disable-scroll"},{default:a(()=>[t(F,null,{default:a(()=>[S("h1",{onClick:c[0]||(c[0]=C=>f.value=!0)},"Rhythmologist"),S("div",lt,[t(b,{simple:"",active:u.value},{default:a(()=>[t(w,{title:"\u914D\u7F6E\u7F16\u8F91",status:o.value},null,8,["status"]),t(w,{title:"\u8FD0\u884C\u7ED3\u679C",status:i.value},null,8,["status"])]),_:1},8,["active"])]),S("div",tt,[p(n).config.batchPresets?(g(),v(A,{key:0,modelValue:p(e).selectedPresetName,"onUpdate:modelValue":c[1]||(c[1]=C=>p(e).selectedPresetName=C),placeholder:"\u9009\u62E9\u751F\u6210\u9884\u8BBE",style:{width:"150px","margin-right":"12px"}},{default:a(()=>[(g(!0),E(U,null,N(Object.keys(p(n).config.batchPresets),C=>(g(),v(_,{key:C,label:C,value:C},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):B("",!0),t(O,{disabled:!p(n).config.batchPresets||!(p(e).selectedPresetName in p(n).config.batchPresets),onClick:c[2]||(c[2]=C=>p(e).run())},{default:a(()=>[h(" \u8FD0\u884C ")]),_:1},8,["disabled"]),u.value===1?(g(),E(U,{key:1},[t(O,{onClick:c[3]||(c[3]=C=>p(n).load())},{default:a(()=>[h("\u6253\u5F00")]),_:1}),t(O,{onClick:c[4]||(c[4]=C=>p(n).save())},{default:a(()=>[h("\u4FDD\u5B58")]),_:1})],64)):(g(),E(U,{key:2},[t(O,{onClick:c[5]||(c[5]=C=>s.value=!0)},{default:a(()=>[h("\u5BFC\u51FA")]),_:1}),t(O,{onClick:c[6]||(c[6]=C=>p(e).edit())},{default:a(()=>[h("\u8FD4\u56DE\u7F16\u8F91")]),_:1})],64))])]),_:1}),t(R,{class:"disable-scroll"},{default:a(()=>[(g(),v(Et,null,[(g(),v(Ne(d.value)))],1024))]),_:1})]),_:1}),t(y,{modelValue:f.value,"onUpdate:modelValue":c[7]||(c[7]=C=>f.value=C),title:"\u5173\u4E8E",class:"about-dialog"},{default:a(()=>[at,nt,ot,ut,rt,it]),_:1},8,["modelValue"]),t(y,{modelValue:s.value,"onUpdate:modelValue":c[10]||(c[10]=C=>s.value=C),title:"\u5BFC\u51FA"},{default:a(()=>[t(V,{onClick:c[8]||(c[8]=C=>p(e).exportAbc())},{default:a(()=>[h("\u5BFC\u51FAabc\uFF08\u4E00\u7EBF\u8C31\uFF09")]),_:1}),t(V,{onClick:c[9]||(c[9]=C=>p(e).exportAbc(!0))},{default:a(()=>[h("\u5BFC\u51FAabc\uFF08\u666E\u901A\u4E94\u7EBF\u8C31\uFF09")]),_:1})]),_:1},8,["modelValue"])],64)}}}),dt=Ee(st,[["__scopeId","data-v-706c9bac"]]),ce=Ct(dt);ce.use(Ut()),ce.use(At),ce.mount("#app")});
